{"id":"firebase-05j","title":"[GREEN] rules.do: Implement request context builder","description":"Build request context from HTTP request and auth token","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:19.589437-06:00","updated_at":"2026-01-05T14:16:48.03296-06:00","closed_at":"2026-01-05T14:16:48.03296-06:00","close_reason":"Already implemented in src/rules/evaluator.ts - includes RequestContext, AuthContext, ResourceContext, EvaluatorContext interfaces and RulesEvaluator class with full expression evaluation, binary/unary operators, member expressions, function calls, and request/resource context handling","dependencies":[{"issue_id":"firebase-05j","depends_on_id":"firebase-iqp","type":"blocks","created_at":"2026-01-05T09:14:59.484982-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0ewr","title":"FIX: Add email format validation to handleUpdate","description":"In identity-toolkit.ts around line 449-455, add email format validation before checking for duplicates","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T07:00:59.52288-06:00","updated_at":"2026-01-06T07:22:18.809956-06:00","closed_at":"2026-01-06T07:22:18.809956-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-0ewr","depends_on_id":"firebase-r6qt","type":"blocks","created_at":"2026-01-06T07:00:59.524747-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0j7","title":"[GREEN] functions.do: Implement auth context from ID token","description":"Verify ID token, inject auth context into function","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:41.669533-06:00","updated_at":"2026-01-05T14:22:54.345388-06:00","closed_at":"2026-01-05T14:22:54.345388-06:00","close_reason":"Implemented in src/functions/callable.ts: parseAuthHeader verifies Bearer token using verifyFirebaseToken, extracts CallableAuthContext (uid, email, claims). Full callable function protocol.","dependencies":[{"issue_id":"firebase-0j7","depends_on_id":"firebase-cmp","type":"blocks","created_at":"2026-01-05T09:14:21.541344-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0je9","title":"TEST: Verify type-safe batch operation responses","description":"Write tests that validate batch responses match expected discriminated union types","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:02:39.925126-06:00","updated_at":"2026-01-06T07:47:38.568297-06:00","closed_at":"2026-01-06T07:47:38.568297-06:00","close_reason":"Closed"}
{"id":"firebase-0lmu","title":"REFACTOR: Create sandboxed regex execution service","description":"Extract regex execution to isolated service with CPU/memory limits, proper async termination","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:08.998319-06:00","updated_at":"2026-01-06T07:01:08.998319-06:00","dependencies":[{"issue_id":"firebase-0lmu","depends_on_id":"firebase-0qan","type":"blocks","created_at":"2026-01-06T07:05:54.685347-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0qan","title":"FIX: Implement true timeout termination for regex execution","description":"Use worker threads or vm module with timeout to actually kill long-running regex, not just warn","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-06T07:01:02.552849-06:00","updated_at":"2026-01-06T07:01:02.552849-06:00","dependencies":[{"issue_id":"firebase-0qan","depends_on_id":"firebase-fwjm","type":"blocks","created_at":"2026-01-06T07:05:48.506991-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0rn","title":"[REFACTOR] firestore.do: Add query optimization and index hints","description":"Query plan analysis, suggest indexes, optimize compound queries","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:06.85609-06:00","updated_at":"2026-01-05T09:13:06.85609-06:00","dependencies":[{"issue_id":"firebase-0rn","depends_on_id":"firebase-vom","type":"blocks","created_at":"2026-01-05T09:14:55.205676-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0u9l","title":"REFACTOR: Create query planner for optimal index selection","description":"Implement query analyzer that selects best available index or warns about missing indexes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:10.424079-06:00","updated_at":"2026-01-06T07:01:10.424079-06:00","dependencies":[{"issue_id":"firebase-0u9l","depends_on_id":"firebase-gwf1","type":"blocks","created_at":"2026-01-06T07:06:08.244109-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-0wk","title":"[GREEN] infra: Implement FirebaseApp config with custom endpoints","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:11.403566-06:00","updated_at":"2026-01-06T07:46:33.520824-06:00","closed_at":"2026-01-06T07:46:33.520824-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-0wk","depends_on_id":"firebase-9bs","type":"blocks","created_at":"2026-01-05T09:12:01.287776-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-143","title":"Create missing index.ts entry points for all modules","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T12:03:22.049682-06:00","updated_at":"2026-01-05T12:15:24.478301-06:00","closed_at":"2026-01-05T12:15:24.478301-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-1gq","title":"[RED] firestore.do: Test beginTransaction/commit/rollback","description":"Write failing tests for transaction lifecycle and isolation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:36.243142-06:00","updated_at":"2026-01-05T14:18:28.844788-06:00","closed_at":"2026-01-05T14:18:28.844788-06:00","close_reason":"Tests exist in test/firestore/batch.test.ts - Transaction Support section covers beginTransaction, commit, and rollback operations"}
{"id":"firebase-1rm","title":"Test Coverage Missing for Error Conditions","description":"## Problem\nNo tests for JWT verification errors, malformed inputs, and other error conditions.\n\n## TDD Approach\n\n### RED\nIdentify all uncovered error paths:\n- JWT verification failures\n- Malformed token inputs\n- Invalid Firebase configuration\n- Network errors\n- Permission denied scenarios\n\n### GREEN\nWrite tests for each error condition:\n- Test JWT expiration handling\n- Test malformed JWT rejection\n- Test invalid signature detection\n- Test missing claims handling\n\n### REFACTOR\nCreate shared error testing utilities:\n- Error assertion helpers\n- Mock error generators\n- Common error scenarios library\n\n## Acceptance Criteria\n- [ ] All error paths identified and documented\n- [ ] Tests exist for each error condition\n- [ ] Shared error testing utilities created","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T13:06:32.329122-06:00","updated_at":"2026-01-05T13:06:32.329122-06:00"}
{"id":"firebase-1u8","title":"[REFACTOR] firestore.do: Optimize codec performance and add validation","description":"Cache type handlers, validate on decode, handle malformed data","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:32.188248-06:00","updated_at":"2026-01-05T09:13:32.188248-06:00","dependencies":[{"issue_id":"firebase-1u8","depends_on_id":"firebase-28y","type":"blocks","created_at":"2026-01-05T09:15:47.480264-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-1vg","title":"Rules: Missing Math/Timestamp/Duration Builtins","description":"## Problem\nOnly string methods are implemented. Missing math.abs(), timestamp.date(), duration.value() and other builtin functions.\n\n**Location:** `src/rules/evaluator.ts:918-939`\n\n## TDD Approach\n\n### RED: Write Failing Tests\nWrite tests for all math/timestamp/duration operations:\n\n**Math functions:**\n- math.abs(x) - absolute value\n- math.ceil(x) - ceiling\n- math.floor(x) - floor\n- math.round(x) - rounding\n- math.isInfinite(x) - infinity check\n- math.isNaN(x) - NaN check\n\n**Timestamp functions:**\n- timestamp.date() - get date component\n- timestamp.year(), month(), day()\n- timestamp.hours(), minutes(), seconds(), nanos()\n- timestamp.dayOfWeek(), dayOfYear()\n- timestamp.toMillis()\n\n**Duration functions:**\n- duration.value(unit) - get value in specified unit\n- duration.seconds(), nanos()\n\n### GREEN: Make Tests Pass\nImplement complete builtin functions:\n- Add MathNamespace with all math operations\n- Add TimestampType methods for date/time extraction\n- Add DurationType methods for duration handling\n- Ensure type coercion matches Firebase Rules behavior\n\n### REFACTOR: Clean Up\nAdd namespace organization:\n- Group related functions under namespaces\n- Document all builtin functions\n- Add type signatures for IDE support\n- Ensure consistency with Firebase documentation","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T13:06:05.500966-06:00","updated_at":"2026-01-06T10:28:21.593283-06:00","closed_at":"2026-01-06T10:28:21.593283-06:00","close_reason":"Closed"}
{"id":"firebase-1xy","title":"[GREEN] auth.do: Implement refresh token exchange endpoint","description":"Store and validate refresh tokens, issue new ID tokens","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:23.255296-06:00","updated_at":"2026-01-06T09:44:49.698939-06:00","closed_at":"2026-01-06T09:44:49.698939-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-1xy","depends_on_id":"firebase-22i","type":"blocks","created_at":"2026-01-05T09:13:50.400857-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-20y6","title":"FIX: Replace global config state with context objects","description":"Create FirebaseContext that holds projectId and config, pass through function calls","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:39.683143-06:00","updated_at":"2026-01-06T07:02:39.683143-06:00","dependencies":[{"issue_id":"firebase-20y6","depends_on_id":"firebase-zckf","type":"blocks","created_at":"2026-01-06T07:06:44.142587-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-210","title":"Rules: Missing 'is' Type Checking Operator","description":"## Problem\nThe 'is' type checking operator is tokenized but not handled semantically in the rules evaluator.\n\n**Location:** `src/rules/parser.ts:1197`\n\n## TDD Approach\n\n### RED: Write Failing Tests\nWrite tests for \"resource.data.name is string\":\n- Test primitive type checks: is string, is int, is float, is bool, is null\n- Test complex type checks: is list, is map, is timestamp, is duration, is path, is latlng\n- Test negative cases: value is not expected type\n- Test with nested property access\n- Test in conditional expressions\n- Test with variables and function returns\n- Test precedence with other operators\n\n### GREEN: Make Tests Pass\nImplement type checking operator:\n- Add 'is' operator to expression parser\n- Implement runtime type checking logic\n- Support all Firebase Rules types\n- Handle null values correctly\n- Return boolean result\n- Match Firebase Rules type semantics exactly\n\n### REFACTOR: Clean Up\nAdd type system documentation:\n- Document all supported types\n- Add examples for each type check\n- Document type hierarchy and coercion rules\n- Add IDE/LSP support for type checking\n- Consider static analysis for type errors","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-05T13:06:19.110666-06:00","updated_at":"2026-01-05T13:06:19.110666-06:00"}
{"id":"firebase-22i","title":"[RED] auth.do: Test refresh token exchange","description":"Write failing tests for POST /v1/token with grant_type=refresh_token","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:16.972289-06:00","updated_at":"2026-01-06T08:01:57.636124-06:00","closed_at":"2026-01-06T08:01:57.636124-06:00","close_reason":"Closed"}
{"id":"firebase-244","title":"[RED] e2e: Test complete auth flow with Firebase SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:01.432374-06:00","updated_at":"2026-01-06T09:44:59.150305-06:00","closed_at":"2026-01-06T09:44:59.150305-06:00","close_reason":"Closed"}
{"id":"firebase-28y","title":"[GREEN] firestore.do: Implement Firestore value type codec","description":"Encode/decode all Firestore value types to/from mongo.do format","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:40.770759-06:00","updated_at":"2026-01-05T14:16:22.819805-06:00","closed_at":"2026-01-05T14:16:22.819805-06:00","close_reason":"Already implemented in src/firestore/values.ts - Complete Firestore value type codec with encodeValue, decodeValue, encodeFields, decodeFields functions supporting all Firestore types (null, boolean, integer, double, string, timestamp, bytes, reference, geoPoint, array, map)","dependencies":[{"issue_id":"firebase-28y","depends_on_id":"firebase-co6","type":"blocks","created_at":"2026-01-05T09:15:40.939091-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2hr","title":"[GREEN] infra: Implement main router for all Firebase services","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:27.110725-06:00","updated_at":"2026-01-06T07:57:45.339862-06:00","closed_at":"2026-01-06T07:57:45.339862-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-2hr","depends_on_id":"firebase-dgx","type":"blocks","created_at":"2026-01-05T09:12:11.848187-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2m8","title":"[REFACTOR] infra: Add error logging and debugging aids","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:48.052271-06:00","updated_at":"2026-01-05T09:11:48.052271-06:00","dependencies":[{"issue_id":"firebase-2m8","depends_on_id":"firebase-deu","type":"blocks","created_at":"2026-01-05T09:12:27.458223-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2qd","title":"[REFACTOR] functions.do: Optimize streaming with backpressure","description":"Handle slow clients, backpressure, cancellation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:48.492276-06:00","updated_at":"2026-01-05T09:12:48.492276-06:00","dependencies":[{"issue_id":"firebase-2qd","depends_on_id":"firebase-6uk","type":"blocks","created_at":"2026-01-05T09:14:53.214276-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2rp7","title":"REFACTOR: Create type-safe BinaryOperationEvaluator class","description":"Extract binary operation evaluation to dedicated class with proper typing for each operator type","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:14.411812-06:00","updated_at":"2026-01-06T07:00:14.411812-06:00","dependencies":[{"issue_id":"firebase-2rp7","depends_on_id":"firebase-5lhv","type":"blocks","created_at":"2026-01-06T07:01:06.396823-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2tvw","title":"FIX: Add maximum row validation to parseAddress","description":"In address.ts line 42-44, add check for row \u003c= MAX_ROW (1048576)","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-06T07:00:39.942927-06:00","updated_at":"2026-01-06T07:00:39.942927-06:00","dependencies":[{"issue_id":"firebase-2tvw","depends_on_id":"firebase-4jnk","type":"blocks","created_at":"2026-01-06T07:05:35.274691-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2uw","title":"firebase.do: Core infrastructure and shared components","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-05T09:10:53.143089-06:00","updated_at":"2026-01-05T09:10:53.143089-06:00"}
{"id":"firebase-2y4","title":"[REFACTOR] functions.do: Add latency-based routing","description":"Auto-route to nearest region, failover","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:15.984991-06:00","updated_at":"2026-01-05T09:13:15.984991-06:00","dependencies":[{"issue_id":"firebase-2y4","depends_on_id":"firebase-eg2","type":"blocks","created_at":"2026-01-05T09:15:07.677896-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-2yd","title":"[REFACTOR] functions.do: Cache auth verification results","description":"Cache token verification, handle token refresh during call","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:48.066724-06:00","updated_at":"2026-01-05T09:11:48.066724-06:00","dependencies":[{"issue_id":"firebase-2yd","depends_on_id":"firebase-0j7","type":"blocks","created_at":"2026-01-05T09:14:26.763909-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-30kp","title":"FEAT: Create StorageAdapter interface and InMemoryAdapter","description":"Define DocumentStore, TokenStore, ObjectStore interfaces. Refactor current Map-based storage to implement interfaces.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T06:59:57.845476-06:00","updated_at":"2026-01-06T10:26:52.244663-06:00","closed_at":"2026-01-06T10:26:52.244663-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-30kp","depends_on_id":"firebase-bhp","type":"blocks","created_at":"2026-01-06T07:05:30.516293-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-31i","title":"[REFACTOR] firestore.do: Optimize batch operations with parallelization","description":"Parallel execution where possible, chunking for large batches","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:13.11648-06:00","updated_at":"2026-01-05T09:13:13.11648-06:00","dependencies":[{"issue_id":"firebase-31i","depends_on_id":"firebase-zjw","type":"blocks","created_at":"2026-01-05T09:15:09.066881-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-37i","title":"[RED] infra: Test error response format compatibility","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:37.571899-06:00","updated_at":"2026-01-06T07:32:16.659891-06:00","closed_at":"2026-01-06T07:32:16.659891-06:00","close_reason":"Closed"}
{"id":"firebase-3aya","title":"REFACTOR: Implement structured logging with log levels","description":"Create logger with debug/info/warn/error levels, JSON output option, configurable","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:02.550639-06:00","updated_at":"2026-01-06T10:49:41.578629-06:00","closed_at":"2026-01-06T10:49:41.578629-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-3aya","depends_on_id":"firebase-uz99","type":"blocks","created_at":"2026-01-06T07:09:40.541149-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-3l6z","title":"TEST: Establish test file organization guidelines","description":"Document test file size limits and organization patterns","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:51.687782-06:00","updated_at":"2026-01-06T07:01:51.687782-06:00"}
{"id":"firebase-3n5r","title":"TEST: Verify consistent test assertion style","description":"Check tests use consistent assertion patterns (expect vs assert)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:38.586136-06:00","updated_at":"2026-01-06T07:02:38.586136-06:00"}
{"id":"firebase-40n","title":"[GREEN] firestore.do: Implement transactions with mongo.do sessions","description":"Map Firestore transactions to mongo.do transaction sessions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:34.686241-06:00","updated_at":"2026-01-05T14:16:49.576068-06:00","closed_at":"2026-01-05T14:16:49.576068-06:00","close_reason":"Already implemented in src/firestore/batch.ts - Complete transaction support with beginTransaction, rollback, TransactionStore class with snapshot isolation, conflict detection, read-only/read-write modes, and 60-second timeout","dependencies":[{"issue_id":"firebase-40n","depends_on_id":"firebase-1gq","type":"blocks","created_at":"2026-01-05T09:15:28.034358-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-43x","title":"[GREEN] auth.do: Implement user storage with mongo.do","description":"Store users in mongo.do with password hashing (bcrypt), metadata","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:43.571881-06:00","updated_at":"2026-01-06T08:34:26.114638-06:00","closed_at":"2026-01-06T08:34:26.114638-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-43x","depends_on_id":"firebase-zh9","type":"blocks","created_at":"2026-01-05T09:14:02.716111-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-46r","title":"[REFACTOR] rules.do: Optimize path matching with trie","description":"Build path trie for O(log n) matching","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:58.002375-06:00","updated_at":"2026-01-05T09:12:58.002375-06:00","dependencies":[{"issue_id":"firebase-46r","depends_on_id":"firebase-j38","type":"blocks","created_at":"2026-01-05T09:14:39.807855-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-490","title":"[firebase] Missing LICENSE file","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T12:09:27.588807-06:00","updated_at":"2026-01-05T12:09:27.588807-06:00"}
{"id":"firebase-49yz","title":"FIX: Enable noUncheckedIndexedAccess in tsconfig","description":"Add noUncheckedIndexedAccess, exactOptionalPropertyTypes to tsconfig and fix resulting errors","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:10:19.379066-06:00","updated_at":"2026-01-06T07:10:19.379066-06:00","dependencies":[{"issue_id":"firebase-49yz","depends_on_id":"firebase-5ivi","type":"blocks","created_at":"2026-01-06T07:10:35.468474-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-4bjp","title":"FIX: Standardize import extensions across codebase","description":"Ensure all relative imports use .js extension for ESM compatibility","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:22.556079-06:00","updated_at":"2026-01-06T07:01:22.556079-06:00","dependencies":[{"issue_id":"firebase-4bjp","depends_on_id":"firebase-w8e3","type":"blocks","created_at":"2026-01-06T07:09:16.052421-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-4cj","title":"Rules: Add recursion depth limit to prevent stack overflow","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:05:24.062184-06:00","updated_at":"2026-01-05T12:15:24.483274-06:00","closed_at":"2026-01-05T12:15:24.483274-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-4ck","title":"[RED] storage.do: Test object metadata operations","description":"Write failing tests for getMetadata, updateMetadata","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:19.342105-06:00","updated_at":"2026-01-05T14:18:53.183981-06:00","closed_at":"2026-01-05T14:18:53.183981-06:00","close_reason":"Tests exist in test/storage/crud.test.ts - Metadata Operations section covers getMetadata and updateMetadata","dependencies":[{"issue_id":"firebase-4ck","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:59.908442-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-4idh","title":"TEST: Verify token expiration uses configurable constant","description":"Write tests that token expiration can be configured, not hardcoded","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:37.602002-06:00","updated_at":"2026-01-06T07:00:37.602002-06:00"}
{"id":"firebase-4jnk","title":"TEST: Verify cell address rejects invalid row numbers","description":"Write tests for row validation: row 0, negative rows, rows \u003e 1048576, very large numbers","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-06T07:00:30.625809-06:00","updated_at":"2026-01-06T07:00:30.625809-06:00"}
{"id":"firebase-4oz2","title":"REFACTOR: Migrate all modules to unified configuration","description":"Remove setProjectId, updateStorageConfig etc in favor of single configure(FirebaseConfig)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:06.9842-06:00","updated_at":"2026-01-06T07:01:06.9842-06:00","dependencies":[{"issue_id":"firebase-4oz2","depends_on_id":"firebase-g3zf","type":"blocks","created_at":"2026-01-06T07:07:03.950286-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-4pr","title":"Auth: Missing Refresh Token Endpoint","description":"## Problem\nNo `/v1/accounts:signInWithRefreshToken` endpoint exists. The `generateRefreshToken` function returns a random string with no validation or storage mechanism.\n\n## Impact\n- Users cannot refresh expired ID tokens\n- Sessions effectively expire after 1 hour with no recovery\n- Does not match Firebase Auth behavior\n\n## TDD Plan\n\n### RED: Write failing tests\n```typescript\ndescribe('Refresh Token Flow', () =\u003e {\n  it('should have signInWithRefreshToken endpoint', async () =\u003e {\n    const response = await fetch('/v1/accounts:signInWithRefreshToken', {\n      method: 'POST',\n      body: JSON.stringify({ refresh_token: validRefreshToken })\n    });\n    expect(response.status).not.toBe(404);\n  });\n\n  it('should return new ID token for valid refresh token', async () =\u003e {\n    const { refreshToken } = await signIn(email, password);\n    const result = await signInWithRefreshToken(refreshToken);\n    expect(result.id_token).toBeDefined();\n    expect(result.refresh_token).toBeDefined();\n  });\n\n  it('should reject invalid refresh tokens', async () =\u003e {\n    await expect(signInWithRefreshToken('invalid-token'))\n      .rejects.toThrow('INVALID_REFRESH_TOKEN');\n  });\n\n  it('should reject expired refresh tokens', async () =\u003e {\n    const expiredToken = createExpiredRefreshToken();\n    await expect(signInWithRefreshToken(expiredToken))\n      .rejects.toThrow('TOKEN_EXPIRED');\n  });\n});\n```\n\n### GREEN: Implementation\n1. Create `/v1/accounts:signInWithRefreshToken` endpoint\n2. Store refresh tokens with user association and expiry\n3. Validate refresh token exists, is not expired, and belongs to user\n4. Generate new ID token and optionally rotate refresh token\n\n### REFACTOR: Improvements\n1. Add token revocation support (sign out should invalidate refresh tokens)\n2. Add refresh token rotation option\n3. Track refresh token usage for security auditing\n4. Support revoking all tokens for a user","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-05T13:06:09.365508-06:00","updated_at":"2026-01-05T13:06:09.365508-06:00"}
{"id":"firebase-4sy","title":"[RED] storage.do: Test getDownloadURL generation","description":"Write failing tests for signed URL generation with expiration","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:31.52963-06:00","updated_at":"2026-01-05T14:18:35.702986-06:00","closed_at":"2026-01-05T14:18:35.702986-06:00","close_reason":"Tests exist in test/storage/crud.test.ts - Download URL Generation section covers getDownloadUrl","dependencies":[{"issue_id":"firebase-4sy","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:50.082525-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-4uq","title":"[RED] firestore.do: Test batchGet and commit endpoints","description":"Write failing tests for batch document retrieval and batch writes","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:21.315688-06:00","updated_at":"2026-01-05T09:36:03.303462-06:00","closed_at":"2026-01-05T09:36:03.303462-06:00","close_reason":"Batch operation tests implemented in test/firestore/batch.test.ts"}
{"id":"firebase-54mz","title":"FIX: Add overflow protection to column index calculation","description":"In column.ts line 34, add check against MAX_SAFE_INTEGER and reasonable column limit","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-06T07:01:21.976682-06:00","updated_at":"2026-01-06T07:01:21.976682-06:00","dependencies":[{"issue_id":"firebase-54mz","depends_on_id":"firebase-vht2","type":"blocks","created_at":"2026-01-06T07:06:04.295154-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-557","title":"[GREEN] functions.do: Implement function registry","description":"Register functions, route by name, handle not found","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:12.670364-06:00","updated_at":"2026-01-05T14:16:22.212537-06:00","closed_at":"2026-01-05T14:16:22.212537-06:00","close_reason":"Already implemented in src/functions/callable.ts - functionRegistry Map and registerFunction() provide function registration capability","dependencies":[{"issue_id":"firebase-557","depends_on_id":"firebase-zwa","type":"blocks","created_at":"2026-01-05T09:14:34.059691-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-58x","title":"Auth: Use constant-time password comparison to prevent timing attacks","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:03:47.975011-06:00","updated_at":"2026-01-05T12:15:24.481741-06:00","closed_at":"2026-01-05T12:15:24.481741-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-5cig","title":"REFACTOR: Implement proper dependency injection for configuration","description":"Create factory functions that accept config and return configured service instances","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:48.498276-06:00","updated_at":"2026-01-06T07:02:48.498276-06:00","dependencies":[{"issue_id":"firebase-5cig","depends_on_id":"firebase-20y6","type":"blocks","created_at":"2026-01-06T07:06:49.450097-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-5dm","title":"[GREEN] storage.do: Implement resumable upload with R2 multipart","description":"Session URLs, chunk tracking, R2 multipart upload","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:52.653095-06:00","updated_at":"2026-01-05T14:22:20.16881-06:00","closed_at":"2026-01-05T14:22:20.16881-06:00","close_reason":"Implemented in src/storage/resumable.ts: Full resumable upload protocol with initiate, resume, status, cancel, complete. Memory tracking, chunk validation, checksum verification, cleanup timer.","dependencies":[{"issue_id":"firebase-5dm","depends_on_id":"firebase-5zy","type":"blocks","created_at":"2026-01-05T09:14:32.728733-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-5dm","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:47.547277-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-5ez","title":"[GREEN] rules.do: Implement rules DSL parser","description":"Parse Firestore rules syntax into AST","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:53.73458-06:00","updated_at":"2026-01-05T14:22:09.065917-06:00","closed_at":"2026-01-05T14:22:09.065917-06:00","close_reason":"Implemented in src/rules/parser.ts: Full Lexer and Parser for Firebase Security Rules DSL. Supports rules_version, service declarations, match blocks, allow statements, function declarations, path patterns, and expressions.","dependencies":[{"issue_id":"firebase-5ez","depends_on_id":"firebase-jdg","type":"blocks","created_at":"2026-01-05T09:14:08.56615-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-5h4","title":"[RED] e2e: Test unmodified Firebase SDK initialization","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:50.776817-06:00","updated_at":"2026-01-06T09:32:09.608294-06:00","closed_at":"2026-01-06T09:32:09.608294-06:00","close_reason":"Closed"}
{"id":"firebase-5ivi","title":"TEST: Verify codebase passes stricter TypeScript checks","description":"Add tests that would fail without noUncheckedIndexedAccess - array access without guards","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:10:13.115418-06:00","updated_at":"2026-01-06T07:10:13.115418-06:00"}
{"id":"firebase-5kh","title":"auth.do: Firebase Auth API compatibility layer","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-05T09:10:52.027435-06:00","updated_at":"2026-01-05T09:10:52.027435-06:00"}
{"id":"firebase-5ko","title":"FIX: Implement periodic cleanup for expired refresh tokens","description":"Add interval-based cleanup that removes expired tokens from refreshTokenStore. Consider WeakMap or TTL-based Map.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T06:59:53.265085-06:00","updated_at":"2026-01-06T07:36:18.575831-06:00","closed_at":"2026-01-06T07:36:18.575831-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-5ko","depends_on_id":"firebase-mtm","type":"blocks","created_at":"2026-01-06T07:00:49.302256-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-5lhv","title":"FIX: Replace any casts with type guards in evaluator binary operations","description":"In evaluator.ts lines 795-811, 363, 400, 421, 440 - create type guards for comparable values and arithmetic operands","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:00:03.696822-06:00","updated_at":"2026-01-06T07:36:21.390068-06:00","closed_at":"2026-01-06T07:36:21.390068-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-5lhv","depends_on_id":"firebase-m70","type":"blocks","created_at":"2026-01-06T07:01:00.249017-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-5pd","title":"[RED] rules.do: Test path pattern matching","description":"Write failing tests for wildcard, single-segment, recursive matching","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:19.989152-06:00","updated_at":"2026-01-05T09:39:57.487412-06:00","closed_at":"2026-01-05T09:39:57.487412-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-5qi","title":"Storage Missing Access Control","description":"## Problem\nThere is no authentication or authorization validation in the Storage module. All operations are permitted for any caller, creating a critical security vulnerability.\n\n## Security Impact\n- Any unauthenticated user can read any file\n- Any user can write/delete any file\n- No bucket-level permissions enforced\n- No object-level ACLs respected\n\n## TDD Approach\n\n### RED: Write Failing Tests\n- Write tests that verify unauthenticated requests are rejected (401)\n- Write tests that verify unauthorized requests are rejected (403)\n- Write tests for bucket-level permission checks\n- Write tests for object-level ACL enforcement\n- Write tests for signed URL validation\n\n### GREEN: Implement ACL Enforcement\n- Add authentication middleware to all Storage routes\n- Implement Firebase Auth token validation\n- Check bucket-level IAM permissions\n- Enforce object-level ACLs (owner, reader, writer)\n- Validate signed URLs with proper expiration\n\n### REFACTOR: Add Bucket/Object-Level Policies\n- Implement Security Rules evaluation for Storage\n- Add support for custom metadata-based access control\n- Implement audit logging for access attempts\n- Add rate limiting per user/bucket\n- Support cross-origin resource sharing (CORS) policies","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T13:06:12.400557-06:00","updated_at":"2026-01-05T13:33:46.291869-06:00","closed_at":"2026-01-05T13:33:46.291869-06:00","close_reason":"Added StorageSecurityMode (open/authenticated/rules), StorageAuthContext, verifyStorageAuth() and checkStoragePermission() functions for token validation and path-based access control"}
{"id":"firebase-5ux","title":"[RED] auth.do: Test WorkOS OAuth flow integration","description":"Write failing tests for OAuth callback handling, user session creation from WorkOS","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:37.478292-06:00","updated_at":"2026-01-06T07:36:39.770733-06:00","closed_at":"2026-01-06T07:36:39.770733-06:00","close_reason":"Closed"}
{"id":"firebase-5uz","title":"Functions: Implement httpsCallable and getFunctions client APIs","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:05:11.738783-06:00","updated_at":"2026-01-06T10:24:51.988838-06:00","closed_at":"2026-01-06T10:24:51.988838-06:00","close_reason":"Closed"}
{"id":"firebase-5y5","title":"[RED] rules.do: Test rules deployment API","description":"Write failing tests for uploading and activating rules","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:38.524949-06:00","updated_at":"2026-01-06T07:42:45.892617-06:00","closed_at":"2026-01-06T07:42:45.892617-06:00","close_reason":"Closed"}
{"id":"firebase-5zjd","title":"TEST: Benchmark query performance with large document sets","description":"Write performance tests with 10k, 100k documents measuring query latency. Establish baseline and targets.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:57.993102-06:00","updated_at":"2026-01-06T07:00:57.993102-06:00"}
{"id":"firebase-5zy","title":"[RED] storage.do: Test resumable upload protocol","description":"Write failing tests for upload session creation, chunk upload, finalization","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:13.110969-06:00","updated_at":"2026-01-05T09:58:22.701309-06:00","closed_at":"2026-01-05T09:58:22.701309-06:00","close_reason":"RED phase tests written","dependencies":[{"issue_id":"firebase-5zy","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:40.563327-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-61lr","title":"REFACTOR: Add safe array/object access utilities","description":"Create safeGet(array, index), safeAccess(obj, key) utilities for clean optional access patterns","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:10:25.88066-06:00","updated_at":"2026-01-06T07:10:25.88066-06:00","dependencies":[{"issue_id":"firebase-61lr","depends_on_id":"firebase-49yz","type":"blocks","created_at":"2026-01-06T07:10:42.53031-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-6pb","title":"Auth: Add request body size limit to prevent DoS","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:03:55.106468-06:00","updated_at":"2026-01-05T12:15:24.482562-06:00","closed_at":"2026-01-05T12:15:24.482562-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-6r2","title":"Functions: Missing Response Size Validation","description":"## Problem\nNo validation of response payload size exists. Firebase Functions has a 10MB limit for callable function responses, but this emulator does not enforce it.\n\n## Location\n`src/functions/callable.ts:279-294`\n\n## Impact\n- Functions returning \u003e10MB will succeed in emulator but fail in production\n- No early warning for developers about size constraints\n- Memory issues possible with very large responses\n\n## TDD Plan\n\n### RED: Write failing tests\n```typescript\ndescribe('Response Size Validation', () =\u003e {\n  it('should reject responses exceeding 10MB', async () =\u003e {\n    const handler = () =\u003e {\n      // Return ~11MB of data\n      return { data: 'x'.repeat(11 * 1024 * 1024) };\n    };\n    \n    const callable = createCallable(handler);\n    await expect(callable({})).rejects.toMatchObject({\n      code: 'RESOURCE_EXHAUSTED',\n      message: expect.stringContaining('10MB')\n    });\n  });\n\n  it('should allow responses under 10MB', async () =\u003e {\n    const handler = () =\u003e {\n      // Return ~5MB of data\n      return { data: 'x'.repeat(5 * 1024 * 1024) };\n    };\n    \n    const callable = createCallable(handler);\n    const result = await callable({});\n    expect(result.data).toHaveLength(5 * 1024 * 1024);\n  });\n\n  it('should use configurable size limit', async () =\u003e {\n    const handler = () =\u003e ({ data: 'x'.repeat(1024) });\n    const callable = createCallable(handler, { maxResponseSize: 500 });\n    \n    await expect(callable({})).rejects.toMatchObject({\n      code: 'RESOURCE_EXHAUSTED'\n    });\n  });\n});\n```\n\n### GREEN: Implementation\n1. Calculate serialized response size before sending\n2. Compare against 10MB default limit\n3. Throw `RESOURCE_EXHAUSTED` error if exceeded\n\n```typescript\nconst MAX_RESPONSE_SIZE = 10 * 1024 * 1024; // 10MB\n\nfunction validateResponseSize(response: any, maxSize = MAX_RESPONSE_SIZE) {\n  const serialized = JSON.stringify(response);\n  if (serialized.length \u003e maxSize) {\n    throw new HttpsError(\n      'resource-exhausted',\n      \\`Response size \\${serialized.length} exceeds maximum \\${maxSize} bytes\\`\n    );\n  }\n  return serialized;\n}\n```\n\n### REFACTOR: Improvements\n1. Add configurable size limits per function\n2. Add request size validation (also 10MB limit)\n3. Add helpful error message with actual vs allowed size\n4. Consider streaming support for large payloads","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:30.837929-06:00","updated_at":"2026-01-05T14:06:06.529369-06:00","closed_at":"2026-01-05T14:06:06.529369-06:00","close_reason":"Closed"}
{"id":"firebase-6uk","title":"[GREEN] functions.do: Implement streaming function responses","description":"Support NDJSON streaming, ReadableStream responses","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:40.733208-06:00","updated_at":"2026-01-06T08:34:41.492306-06:00","closed_at":"2026-01-06T08:34:41.492306-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-6uk","depends_on_id":"firebase-mmg","type":"blocks","created_at":"2026-01-05T09:14:47.993016-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-6vh","title":"[RED] firestore.do: Test document CRUD operations","description":"Write failing tests for GET/PATCH/DELETE document endpoints matching Firestore REST API","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:08.944024-06:00","updated_at":"2026-01-05T09:36:18.903842-06:00","closed_at":"2026-01-05T09:36:18.903842-06:00","close_reason":"Firestore CRUD tests implemented in test/firestore/crud.test.ts"}
{"id":"firebase-6w54","title":"TEST: Verify environment variable handling is consistent","description":"Write tests for env var loading with both FIREBASE_PROJECT_ID and FIREBASE_projectId","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:24.743319-06:00","updated_at":"2026-01-06T09:05:15.463187-06:00","closed_at":"2026-01-06T09:05:15.463187-06:00","close_reason":"Closed"}
{"id":"firebase-72l","title":"storage.do: Firebase Storage API compatibility with R2","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-05T09:10:53.717074-06:00","updated_at":"2026-01-05T09:10:53.717074-06:00"}
{"id":"firebase-7686","title":"FIX: Extract magic numbers to named constants","description":"Create TOKEN_EXPIRATION_SECONDS = 3600, MAX_ROW = 1048576, etc as named exports","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:43.876082-06:00","updated_at":"2026-01-06T07:00:43.876082-06:00","dependencies":[{"issue_id":"firebase-7686","depends_on_id":"firebase-4idh","type":"blocks","created_at":"2026-01-06T07:08:48.239534-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-7dk","title":"Security Vulnerabilities in Dependencies","description":"## Problem\n14 moderate CVEs in transitive dependencies. esbuild, undici have known issues.\n\n## TDD Approach\n\n### RED\nRun npm audit and document failures:\n- Execute npm audit\n- Document all CVEs with severity\n- Identify affected packages (esbuild, undici, etc.)\n- Create vulnerability report\n\n### GREEN\nUpdate firebase SDK and dependencies:\n- Update firebase-admin to latest\n- Update firebase to latest\n- Update transitive dependencies\n- Resolve or document remaining vulnerabilities\n\n### REFACTOR\nAdd npm audit to CI pipeline:\n- Add audit step to GitHub Actions\n- Configure audit level threshold\n- Add automated dependency updates (Dependabot)\n\n## Acceptance Criteria\n- [ ] All CVEs documented\n- [ ] Dependencies updated to resolve vulnerabilities\n- [ ] npm audit passes in CI\n- [ ] Dependabot configured for ongoing security","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-05T13:06:46.543307-06:00","updated_at":"2026-01-05T13:06:46.543307-06:00"}
{"id":"firebase-7hm9","title":"FIX: Replace error: any with unknown and add type guards","description":"In server.ts - change catch(error: any) to catch(error: unknown), add isFirestoreError type guard, fix validateFields typing","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:36.252311-06:00","updated_at":"2026-01-06T08:44:02.358819-06:00","closed_at":"2026-01-06T08:44:02.358819-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-7hm9","depends_on_id":"firebase-mixr","type":"blocks","created_at":"2026-01-06T07:02:04.061005-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-7n5","title":"Missing Shared Test Utilities","description":"## Problem\nEach test file duplicates helper code, leading to maintenance burden and inconsistency.\n\n## TDD Approach\n\n### RED\nIdentify duplicated patterns:\n- Mock Firebase app creation\n- Test token generation\n- Common assertions\n- Setup/teardown patterns\n\n### GREEN\nCreate /test/helpers with shared utilities:\n- test/helpers/firebase-mock.ts\n- test/helpers/token-factory.ts\n- test/helpers/assertions.ts\n- test/helpers/index.ts (barrel export)\n\n### REFACTOR\nMigrate all tests to use shared helpers:\n- Update existing test files\n- Remove duplicated code\n- Ensure consistent test patterns\n\n## Acceptance Criteria\n- [ ] Duplicated patterns documented\n- [ ] /test/helpers directory created with utilities\n- [ ] All test files migrated to use shared helpers\n- [ ] No duplicate helper code remains","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T13:06:39.334491-06:00","updated_at":"2026-01-05T13:06:39.334491-06:00"}
{"id":"firebase-7nb3","title":"REFACTOR: Create type-safe field path traversal utility","description":"Extract getFieldByPath to use recursive types instead of any for safe nested access","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:52.627459-06:00","updated_at":"2026-01-06T10:32:34.476914-06:00","closed_at":"2026-01-06T10:32:34.476914-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-7nb3","depends_on_id":"firebase-km9e","type":"blocks","created_at":"2026-01-06T07:03:58.236016-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-852","title":"[RED] auth.do: Test Identity Toolkit v1 endpoints","description":"Write failing tests for /v1/accounts:signInWithPassword, :signUp, :lookup, :update, :delete","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:57.316863-06:00","updated_at":"2026-01-05T09:36:08.503871-06:00","closed_at":"2026-01-05T09:36:08.503871-06:00","close_reason":"Identity Toolkit tests implemented in test/auth/identity-toolkit.test.ts"}
{"id":"firebase-89a","title":"[REFACTOR] storage.do: Add caching and CDN integration","description":"Cache headers, signed URLs, CDN purge","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:26.088641-06:00","updated_at":"2026-01-05T09:12:26.088641-06:00","dependencies":[{"issue_id":"firebase-89a","depends_on_id":"firebase-f3q","type":"blocks","created_at":"2026-01-05T09:13:32.053439-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-89a","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:34.137013-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-8hh","title":"[RED] firestore.do: Test Listen/Watch streaming API","description":"Write failing tests for real-time document/query subscriptions via long-polling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:29.26568-06:00","updated_at":"2026-01-05T09:39:57.488903-06:00","closed_at":"2026-01-05T09:39:57.488903-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-8kl","title":"Functions: Integrate JWT verification with auth module","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:05:05.353818-06:00","updated_at":"2026-01-05T12:39:04.906193-06:00","closed_at":"2026-01-05T12:39:04.906193-06:00","close_reason":"Implemented JWT integration"}
{"id":"firebase-8uwk","title":"FEAT: Either integrate or extract orphaned modules","description":"Decision: If related to Firebase - integrate properly with docs. If separate - extract to different package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:30.038453-06:00","updated_at":"2026-01-06T10:53:02.416054-06:00","closed_at":"2026-01-06T10:53:02.416054-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-8uwk","depends_on_id":"firebase-a8eg","type":"blocks","created_at":"2026-01-06T07:06:19.065666-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-943","title":"[GREEN] auth.do: Implement JWT generation with Firebase claims","description":"Implement JWT signing with correct Firebase claim structure using jose library","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:25.073085-06:00","updated_at":"2026-01-05T14:22:43.615024-06:00","closed_at":"2026-01-05T14:22:43.615024-06:00","close_reason":"Implemented in src/auth/jwt.ts: generateFirebaseToken with RS256 signing and Firebase claims (iss, aud, sub, user_id, auth_time, firebase object). Key rotation and verification support.","dependencies":[{"issue_id":"firebase-943","depends_on_id":"firebase-knv","type":"blocks","created_at":"2026-01-05T09:13:11.037809-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-9bs","title":"[RED] infra: Test project configuration and initialization","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:06.167135-06:00","updated_at":"2026-01-05T09:39:57.485712-06:00","closed_at":"2026-01-05T09:39:57.485712-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-9gm","title":"[GREEN] e2e: Configure Firebase SDK to use firebase.do endpoints","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:56.088506-06:00","updated_at":"2026-01-06T09:32:15.527685-06:00","closed_at":"2026-01-06T09:32:15.527685-06:00","close_reason":"Closed"}
{"id":"firebase-9idg","title":"REFACTOR: Implement error hierarchy with error codes","description":"Create FirebaseError base class with code, message, details - consistent across all modules","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:28.163963-06:00","updated_at":"2026-01-06T10:32:57.834643-06:00","closed_at":"2026-01-06T10:32:57.834643-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-9idg","depends_on_id":"firebase-mywu","type":"blocks","created_at":"2026-01-06T07:09:52.652396-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-9m2","title":"[REFACTOR] auth.do: Add rate limiting and validation to Identity Toolkit","description":"Add input validation, rate limiting, audit logging","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:10.653049-06:00","updated_at":"2026-01-05T09:12:10.653049-06:00","dependencies":[{"issue_id":"firebase-9m2","depends_on_id":"firebase-bpg","type":"blocks","created_at":"2026-01-05T09:13:43.831064-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-9n0","title":"Storage Weak Cryptographic Hash Functions","description":"## Problem\nThe MD5 hash only processes the first 16 bytes and CRC32C only processes the first 100 bytes of files. This means:\n- Hash integrity checks are meaningless for files larger than these limits\n- Data corruption beyond these bytes will not be detected\n- Upload verification is fundamentally broken\n\n## Location\n- src/storage/resumable.ts:458-484\n\n## TDD Approach\n\n### RED: Write Failing Tests\n- Write tests with files larger than 16 bytes verifying MD5 hash correctness\n- Write tests with files larger than 100 bytes verifying CRC32C correctness\n- Write tests comparing hashes with known good values\n- Write tests for streaming hash computation on large files (\u003e1GB)\n- Write tests for resumable upload hash continuity\n\n### GREEN: Implement Proper Crypto Algorithms\n- Use Node.js crypto module for MD5 (crypto.createHash('md5'))\n- Use proper CRC32C implementation (consider @node-rs/crc32 or crc32c package)\n- Process entire file content through hash functions\n- Support streaming hash computation for memory efficiency\n- Handle chunked uploads with incremental hashing\n\n### REFACTOR: Use Node.js Crypto Module\n- Abstract hash computation into utility functions\n- Add hash validation on download as well as upload\n- Implement parallel hashing for performance\n- Add hash caching for frequently accessed objects\n- Consider adding SHA-256 as additional integrity check","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T13:06:20.147445-06:00","updated_at":"2026-01-05T13:31:55.546554-06:00","closed_at":"2026-01-05T13:31:55.546554-06:00","close_reason":"Fixed MD5 to use Node.js crypto module (processes entire content) and CRC32C to use proper Castagnoli polynomial with full content processing"}
{"id":"firebase-9qi","title":"[RED] e2e: Test Realtime Database with Firebase SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:22.40553-06:00","updated_at":"2026-01-06T09:47:40.063506-06:00","closed_at":"2026-01-06T09:47:40.063506-06:00","close_reason":"Not applicable - Realtime Database (RTDB) is not implemented in this project. The firebase.do backend only supports Auth, Firestore, Storage, and Functions. The database-do.ts file is for Durable Object storage path utilities, not an RTDB implementation. The config module has RTDB endpoint configuration for future use, but there is no actual RTDB emulator implementation in the codebase."}
{"id":"firebase-9v9n","title":"FEAT: Implement SQLite storage adapter","description":"Implement SQLite-backed storage adapter conforming to StorageAdapter interface","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T07:00:38.352372-06:00","updated_at":"2026-01-06T07:00:38.352372-06:00","dependencies":[{"issue_id":"firebase-9v9n","depends_on_id":"firebase-30kp","type":"blocks","created_at":"2026-01-06T07:05:47.894272-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-a19","title":"[REFACTOR] firestore.do: Optimize CRUD with batching and caching","description":"Add request batching, ETag support, cache headers","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:59.165351-06:00","updated_at":"2026-01-05T09:12:59.165351-06:00","dependencies":[{"issue_id":"firebase-a19","depends_on_id":"firebase-hsm","type":"blocks","created_at":"2026-01-05T09:14:41.234204-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-a1c","title":"[REFACTOR] storage.do: Add upload progress and cancellation","description":"Progress tracking, upload cancellation, cleanup","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:32.431999-06:00","updated_at":"2026-01-05T09:12:32.431999-06:00","dependencies":[{"issue_id":"firebase-a1c","depends_on_id":"firebase-5dm","type":"blocks","created_at":"2026-01-05T09:13:44.264023-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-a1c","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:53.714633-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-a20","title":"Storage: Add collection indexing for efficient prefix queries","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:04:59.284816-06:00","updated_at":"2026-01-06T10:27:58.386687-06:00","closed_at":"2026-01-06T10:27:58.386687-06:00","close_reason":"Closed"}
{"id":"firebase-a4o","title":"Create README.md with installation, usage examples, and API docs","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:03:35.488771-06:00","updated_at":"2026-01-05T12:15:24.48086-06:00","closed_at":"2026-01-05T12:15:24.48086-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-a8eg","title":"TEST: Document and validate orphaned module purposes","description":"Write tests that document the intended use cases for cell/, export/, mongo.ts, database-do.ts modules","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:23.129308-06:00","updated_at":"2026-01-06T07:01:23.129308-06:00"}
{"id":"firebase-aif","title":"firebase.do: E2E integration testing with Firebase SDK","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-05T09:12:37.589547-06:00","updated_at":"2026-01-05T09:12:37.589547-06:00"}
{"id":"firebase-axz","title":"Storage: Weak Signed URL Generation","description":"## Problem\nUses simple SHA256 instead of GOOG4-RSA-SHA256 signing for signed URL generation.\n\n**Location:** `src/storage/objects.ts:1179-1186`\n\n## TDD Approach\n\n### RED: Write Failing Tests\nWrite tests comparing against real Firebase signed URLs:\n- Test that signed URLs use GOOG4-RSA-SHA256 algorithm\n- Test signature format matches GCS v4 specification\n- Test signed URL parameters (X-Goog-Algorithm, X-Goog-Credential, X-Goog-Date, X-Goog-Expires, X-Goog-SignedHeaders)\n- Compare generated signatures against known-good Firebase/GCS signed URLs\n\n### GREEN: Make Tests Pass\nImplement proper GCS v4 request signing:\n- Use RSA-SHA256 instead of simple SHA256\n- Follow Google Cloud Storage v4 signing process\n- Construct canonical request correctly\n- Generate proper string-to-sign\n- Apply RSA-SHA256 signature with service account key\n\n### REFACTOR: Clean Up\nAdd signing key management:\n- Secure key storage and rotation\n- Key caching for performance\n- Support for multiple service accounts\n- Add configuration for signing options","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:05:51.490356-06:00","updated_at":"2026-01-05T14:08:16.534281-06:00","closed_at":"2026-01-05T14:08:16.534281-06:00","close_reason":"Closed"}
{"id":"firebase-az9","title":"Rules: Implement regex timeout/validation for ReDoS prevention","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:05:30.166076-06:00","updated_at":"2026-01-05T14:09:18.514592-06:00","closed_at":"2026-01-05T14:09:18.514592-06:00","close_reason":"Closed"}
{"id":"firebase-b0z","title":"Storage: Incomplete Range Request Implementation","description":"## Problem\nMissing 206 Partial Content response, no multi-range support for range requests.\n\n**Location:** `src/storage/objects.ts:635-667`\n\n## TDD Approach\n\n### RED: Write Failing Tests\nWrite tests for RFC 7233 range request compliance:\n- Test single byte range requests (bytes=0-499)\n- Test suffix byte range requests (bytes=-500)\n- Test prefix byte range requests (bytes=500-)\n- Test multi-range requests (bytes=0-499,1000-1499)\n- Test 206 Partial Content response status\n- Test unsatisfiable range requests (416 response)\n- Test conditional range requests with If-Range header\n\n### GREEN: Make Tests Pass\nImplement full range request support:\n- Parse Range header correctly per RFC 7233\n- Return 206 Partial Content for valid range requests\n- Handle single and multi-range requests\n- Generate multipart/byteranges response for multi-range\n- Return 416 Range Not Satisfiable for invalid ranges\n- Support If-Range conditional requests\n\n### REFACTOR: Clean Up\nAdd Content-Range headers:\n- Proper Content-Range header format (bytes start-end/total)\n- Content-Length for partial responses\n- Accept-Ranges header in responses\n- ETag handling for range requests","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:05:58.705926-06:00","updated_at":"2026-01-05T14:08:16.532707-06:00","closed_at":"2026-01-05T14:08:16.532707-06:00","close_reason":"Closed"}
{"id":"firebase-b74","title":"[REFACTOR] storage.do: Optimize listing with cursor caching","description":"Cache cursors, optimize large bucket listings","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:45.873261-06:00","updated_at":"2026-01-05T09:12:45.873261-06:00","dependencies":[{"issue_id":"firebase-b74","depends_on_id":"firebase-bjg","type":"blocks","created_at":"2026-01-05T09:14:11.025479-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-b74","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:43.495905-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-bbk","title":"[GREEN] auth.do: Implement WorkOS OAuth callback handler","description":"Handle oauth.do callbacks, extract user info, create Firebase user record","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:44.823495-06:00","updated_at":"2026-01-06T08:04:42.509225-06:00","closed_at":"2026-01-06T08:04:42.509225-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-bbk","depends_on_id":"firebase-5ux","type":"blocks","created_at":"2026-01-05T09:13:23.774575-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-bhp","title":"TEST: Define storage interface contract with test suite","description":"Write interface tests that any storage implementation must pass: get, set, delete, query, list operations with expected behaviors","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T06:59:51.566796-06:00","updated_at":"2026-01-06T10:29:06.232845-06:00","closed_at":"2026-01-06T10:29:06.232845-06:00","close_reason":"Closed"}
{"id":"firebase-bjg","title":"[GREEN] storage.do: Implement list operations via R2","description":"R2 list with prefix/delimiter, map to Firebase ListResult","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:05.188138-06:00","updated_at":"2026-01-05T14:16:28.70489-06:00","closed_at":"2026-01-05T14:16:28.70489-06:00","close_reason":"Already implemented in src/storage/objects.ts - listObjects function (lines 892-988) with prefix filtering, delimiter support, pagination, start/end offsets, and version support","dependencies":[{"issue_id":"firebase-bjg","depends_on_id":"firebase-m3j","type":"blocks","created_at":"2026-01-05T09:14:04.490573-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-bjg","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:37.396195-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-bnfy","title":"FIX: Add validation to all configuration updates","description":"Validate config values in updateStorageConfig, setProjectId, etc - throw on invalid","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:24.360234-06:00","updated_at":"2026-01-06T08:33:59.878499-06:00","closed_at":"2026-01-06T08:33:59.878499-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-bnfy","depends_on_id":"firebase-yia0","type":"blocks","created_at":"2026-01-06T07:07:10.755495-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-bpg","title":"[GREEN] auth.do: Implement Identity Toolkit v1 REST endpoints","description":"Implement Firebase Identity Toolkit API endpoints that Firebase SDK expects","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:03.957207-06:00","updated_at":"2026-01-05T14:21:46.176914-06:00","closed_at":"2026-01-05T14:21:46.176914-06:00","close_reason":"Implemented in src/auth/identity-toolkit.ts: handleSignUp, handleSignInWithPassword, handleLookup, handleUpdate, handleDelete, handleSendOobCode. Complete Identity Toolkit v1 REST API compatible endpoints.","dependencies":[{"issue_id":"firebase-bpg","depends_on_id":"firebase-852","type":"blocks","created_at":"2026-01-05T09:13:37.799398-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-bq4u","title":"REFACTOR: Create constants module for all configuration defaults","description":"Consolidate all magic numbers to src/constants.ts with documentation","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:49.983326-06:00","updated_at":"2026-01-06T07:00:49.983326-06:00","dependencies":[{"issue_id":"firebase-bq4u","depends_on_id":"firebase-7686","type":"blocks","created_at":"2026-01-06T07:08:53.531796-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-brc","title":"Rules: Implement is operator for type checking","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:05:36.527872-06:00","updated_at":"2026-01-06T10:23:41.701895-06:00","closed_at":"2026-01-06T10:23:41.701895-06:00","close_reason":"Closed"}
{"id":"firebase-bx0a","title":"REFACTOR: Unify session management across auth and storage","description":"Create shared session management abstraction for tokens, uploads, and other temporary resources","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:45.242068-06:00","updated_at":"2026-01-06T07:02:45.242068-06:00","dependencies":[{"issue_id":"firebase-bx0a","depends_on_id":"firebase-digv","type":"blocks","created_at":"2026-01-06T07:05:26.284823-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-bx0a","depends_on_id":"firebase-mjjj","type":"blocks","created_at":"2026-01-06T07:05:37.078607-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-bx0a","depends_on_id":"firebase-wjbh","type":"blocks","created_at":"2026-01-06T07:05:43.785913-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-c31z","title":"FIX: Add input validation to all auth endpoints","description":"Validate all inputs at entry point of handleSignUp, handleSignIn, handleUpdate, etc.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:50.010753-06:00","updated_at":"2026-01-06T10:22:40.190544-06:00","closed_at":"2026-01-06T10:22:40.190544-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-c31z","depends_on_id":"firebase-mjwm","type":"blocks","created_at":"2026-01-06T07:06:24.43072-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-chf","title":"[REFACTOR] infra: Add routing metrics and tracing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:32.339289-06:00","updated_at":"2026-01-05T09:11:32.339289-06:00","dependencies":[{"issue_id":"firebase-chf","depends_on_id":"firebase-2hr","type":"blocks","created_at":"2026-01-05T09:12:17.048524-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-cmp","title":"[RED] functions.do: Test auth context injection","description":"Write failing tests for context.auth from ID token","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:35.487935-06:00","updated_at":"2026-01-05T14:19:02.918069-06:00","closed_at":"2026-01-05T14:19:02.918069-06:00","close_reason":"Tests exist in test/functions/callable.test.ts - Authorization Header Parsing section covers auth context injection from JWT tokens"}
{"id":"firebase-co6","title":"[RED] firestore.do: Test Firestore value type encoding/decoding","description":"Write failing tests for timestamp, geopoint, reference, bytes encoding","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:42.314735-06:00","updated_at":"2026-01-06T07:57:49.592882-06:00","closed_at":"2026-01-06T07:57:49.592882-06:00","close_reason":"Closed"}
{"id":"firebase-cqex","title":"REFACTOR: Create safe arithmetic operations module","description":"Extract safeDivide, safeModulo that handle edge cases consistently","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:19.844535-06:00","updated_at":"2026-01-06T07:00:19.844535-06:00","dependencies":[{"issue_id":"firebase-cqex","depends_on_id":"firebase-njp2","type":"blocks","created_at":"2026-01-06T07:05:28.982776-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-cug","title":"Rules: Fix hasOnly implementation semantics","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-05T12:05:43.225169-06:00","updated_at":"2026-01-05T12:05:43.225169-06:00"}
{"id":"firebase-d13","title":"[GREEN] rules.do: Implement expression evaluator","description":"Evaluate rules expressions against request/resource context","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:59.989834-06:00","updated_at":"2026-01-05T14:21:57.489008-06:00","closed_at":"2026-01-05T14:21:57.489008-06:00","close_reason":"Implemented in src/rules/evaluator.ts: Full RulesEvaluator class with evaluate, evaluateNode, all binary/unary operators, method calls (matches, size, hasAny, hasAll), builtins (get, exists), and context variables.","dependencies":[{"issue_id":"firebase-d13","depends_on_id":"firebase-p3d","type":"blocks","created_at":"2026-01-05T09:14:21.406473-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-d2h","title":"functions.do: Firebase Cloud Functions callable compatibility","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-05T09:10:51.773939-06:00","updated_at":"2026-01-05T09:10:51.773939-06:00"}
{"id":"firebase-d50","title":"Missing CHANGELOG.md","description":"## Problem\nNo version history documentation exists. Users cannot track changes between versions.\n\n## TDD Approach\n\n### RED\nDefine changelog format requirements:\n- Follow Keep a Changelog format\n- Include semantic versioning\n- Define required sections (Added, Changed, Fixed, etc.)\n\n### GREEN\nCreate CHANGELOG.md with initial entry:\n- Create CHANGELOG.md at project root\n- Add header with format description\n- Document current version (0.0.1)\n- Include all existing features\n\n### REFACTOR\nAdd changelog update to release process:\n- Document changelog update requirements\n- Add PR template reminder\n- Consider automated changelog generation\n\n## Acceptance Criteria\n- [ ] CHANGELOG.md exists with proper format\n- [ ] Current version documented\n- [ ] Release process includes changelog updates","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T13:06:53.688897-06:00","updated_at":"2026-01-05T13:06:53.688897-06:00"}
{"id":"firebase-d56","title":"Missing CI/CD Pipeline","description":"## Problem\nNo .github/workflows directory exists. No automated test runs on PR.\n\n## TDD Approach\n\n### RED\nCreate workflow that runs tests - verify no CI exists and tests would fail in CI environment.\n\n### GREEN\nImplement GitHub Actions for npm test:\n- Create .github/workflows/ci.yml\n- Configure Node.js matrix testing\n- Run npm test on push and PR\n\n### REFACTOR\nAdd coverage reporting:\n- Integrate coverage upload to CI\n- Add badge to README\n- Configure coverage thresholds\n\n## Acceptance Criteria\n- [ ] GitHub Actions workflow exists\n- [ ] Tests run automatically on PR\n- [ ] Coverage reporting integrated","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T13:05:50.274788-06:00","updated_at":"2026-01-05T13:05:50.274788-06:00"}
{"id":"firebase-d95","title":"Firestore Watch API is Mocked","description":"## Problem\nThe watchDocument and watchQuery functions never emit events. The Watch API is completely mocked and non-functional.\n\n## Location\n- src/firestore/watch.ts:593-922\n\n## TDD Approach\n\n### RED: Write Failing Tests\n- Write tests that verify snapshot callbacks are invoked on document changes\n- Write tests that verify query watch callbacks fire on matching document updates\n- Write tests for initial snapshot delivery\n- Write tests for error handling and retry behavior\n- Write tests for unsubscribe cleanup\n\n### GREEN: Implement Real HTTP Streaming\n- Implement HTTP streaming connection to Firestore REST API\n- Parse server-sent events for document changes\n- Translate change events to snapshot callbacks\n- Handle connection lifecycle (connect, reconnect, disconnect)\n- Implement proper error propagation\n\n### REFACTOR: Add Resume Token Support\n- Store and restore resume tokens for connection recovery\n- Implement exponential backoff for reconnection\n- Add connection state monitoring\n- Optimize event batching for high-throughput scenarios\n- Add metrics for connection health","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-05T13:06:04.465043-06:00","updated_at":"2026-01-05T13:36:23.502097-06:00","closed_at":"2026-01-05T13:36:23.502097-06:00","close_reason":"Implemented real Watch API that subscribes to document store changes via subscribeToDocumentChanges(). Emits proper targetChange and documentChange events. Supports both document and collection watches."}
{"id":"firebase-deu","title":"[GREEN] infra: Implement Firebase error code mapping","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:42.806196-06:00","updated_at":"2026-01-05T14:23:11.856968-06:00","closed_at":"2026-01-05T14:23:11.856968-06:00","close_reason":"Firebase error code mapping is implemented - StorageErrorCode enum in objects.ts with HTTP status mapping, IdentityToolkitError in identity-toolkit.ts with code/message/domain format","dependencies":[{"issue_id":"firebase-deu","depends_on_id":"firebase-37i","type":"blocks","created_at":"2026-01-05T09:12:22.252229-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-dgx","title":"[RED] infra: Test request routing to service adapters","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:21.876078-06:00","updated_at":"2026-01-06T07:32:08.669713-06:00","closed_at":"2026-01-06T07:32:08.669713-06:00","close_reason":"Closed"}
{"id":"firebase-digv","title":"FEAT: Implement cleanup for abandoned resumable upload sessions","description":"Add background cleanup for resumable sessions that exceed maxSessionDurationMs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:38.968263-06:00","updated_at":"2026-01-06T09:25:51.658239-06:00","closed_at":"2026-01-06T09:25:51.658239-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-digv","depends_on_id":"firebase-nog0","type":"blocks","created_at":"2026-01-06T07:05:17.684696-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-drsx","title":"REFACTOR: Document import extension convention","description":"Add CONTRIBUTING.md section explaining .js extension requirement for ESM","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:29.653387-06:00","updated_at":"2026-01-06T07:01:29.653387-06:00","dependencies":[{"issue_id":"firebase-drsx","depends_on_id":"firebase-4bjp","type":"blocks","created_at":"2026-01-06T07:09:21.369958-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-dw2","title":"Firestore: Cursor Translation Logic Inverted","description":"## Problem\nstartAt/endAt have wrong operators with DESCENDING order in cursor translation logic.\n\n## Location\n`src/firestore/query.ts:373-410`\n\n## TDD Plan\n\n### RED: Write failing tests\nWrite tests for cursor + descending orderBy combinations:\n- Test startAt with DESCENDING order uses correct operator\n- Test endAt with DESCENDING order uses correct operator\n- Test startAfter with DESCENDING order\n- Test endBefore with DESCENDING order\n- Test mixed ascending/descending field orders\n\n### GREEN: Make tests pass\nFix operator logic for direction:\n- Invert operators when order is DESCENDING\n- startAt with DESC should use `$lte` not `$gte`\n- endAt with DESC should use `$gte` not `$lte`\n- Handle compound orderBy with mixed directions\n\n### REFACTOR: Improve code quality\nAdd comprehensive cursor tests:\n- Edge cases with null/undefined cursor values\n- Multiple field cursors with mixed directions\n- Integration tests with real queries\n- Document the operator mapping logic","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:05:52.566145-06:00","updated_at":"2026-01-05T14:10:08.544897-06:00","closed_at":"2026-01-05T14:10:08.544897-06:00","close_reason":"Closed"}
{"id":"firebase-eg2","title":"[GREEN] functions.do: Implement region-based routing","description":"Route to appropriate edge location based on region","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:09.393797-06:00","updated_at":"2026-01-06T09:57:52.645235-06:00","closed_at":"2026-01-06T09:57:52.645235-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-eg2","depends_on_id":"firebase-zze","type":"blocks","created_at":"2026-01-05T09:15:02.348915-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-eolt","title":"FEAT: Add configurable memory limits to document store","description":"Implement max document count and optional LRU eviction in firestore/crud.ts documentStore","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:16.076534-06:00","updated_at":"2026-01-06T08:33:50.68472-06:00","closed_at":"2026-01-06T08:33:50.68472-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-eolt","depends_on_id":"firebase-fpcv","type":"blocks","created_at":"2026-01-06T07:01:32.507242-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-ewrr","title":"REFACTOR: Update all Value consumers to use type narrowing","description":"Update switch statements and type guards throughout codebase to use new discriminated Value type","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:09:33.980474-06:00","updated_at":"2026-01-06T10:39:16.092384-06:00","closed_at":"2026-01-06T10:39:16.092384-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-ewrr","depends_on_id":"firebase-iym3","type":"blocks","created_at":"2026-01-06T07:09:50.762536-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-f2y","title":"[REFACTOR] rules.do: Optimize evaluator with compilation","description":"Compile rules to JS functions, cache compiled rules","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:51.793209-06:00","updated_at":"2026-01-05T09:12:51.793209-06:00","dependencies":[{"issue_id":"firebase-f2y","depends_on_id":"firebase-d13","type":"blocks","created_at":"2026-01-05T09:14:26.643506-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-f3q","title":"[GREEN] storage.do: Implement object CRUD via R2","description":"Map Firebase Storage API to R2 operations","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:46.666361-06:00","updated_at":"2026-01-05T14:22:33.080763-06:00","closed_at":"2026-01-05T14:22:33.080763-06:00","close_reason":"Implemented in src/storage/objects.ts: Full CRUD - upload, download, delete, getMetadata, updateMetadata, list, copy. Conditional requests, range requests, content type detection, versioning, signed URLs.","dependencies":[{"issue_id":"firebase-f3q","depends_on_id":"firebase-hlt","type":"blocks","created_at":"2026-01-05T09:13:26.064903-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-f3q","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:27.960669-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-f8v","title":"Auth: Make project ID configurable instead of hardcoded","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T12:04:01.277525-06:00","updated_at":"2026-01-05T12:04:01.277525-06:00"}
{"id":"firebase-fap","title":"[GREEN] storage.do: Implement signed URL generation","description":"Generate time-limited signed URLs for R2 objects","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:11.513426-06:00","updated_at":"2026-01-05T14:16:21.906274-06:00","closed_at":"2026-01-05T14:16:21.906274-06:00","close_reason":"Already implemented in src/storage/objects.ts - getDownloadUrl function (lines 1186-1236) with HMAC-SHA256 signing, expiration validation, and generation-based URL invalidation","dependencies":[{"issue_id":"firebase-fap","depends_on_id":"firebase-4sy","type":"blocks","created_at":"2026-01-05T09:14:17.366753-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-fap","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:56.31683-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-fe53","title":"FIX: Correct test script name in CI workflow","description":"Change ci.yml line 20 from npm run test:run to npm test or add test:run alias to package.json","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-06T06:59:55.990115-06:00","updated_at":"2026-01-06T06:59:55.990115-06:00","dependencies":[{"issue_id":"firebase-fe53","depends_on_id":"firebase-r62","type":"blocks","created_at":"2026-01-06T07:06:34.824519-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-fgq","title":"[GREEN] storage.do: Implement metadata storage alongside R2","description":"Store custom metadata in R2 or mongo.do, handle Firebase metadata format","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:58.847351-06:00","updated_at":"2026-01-05T14:22:59.217218-06:00","closed_at":"2026-01-05T14:22:59.217218-06:00","close_reason":"Metadata storage is implemented in objects.ts - ObjectMetadata interface stores metadata alongside object data, with getMetadata() and updateMetadata() functions fully implemented","dependencies":[{"issue_id":"firebase-fgq","depends_on_id":"firebase-4ck","type":"blocks","created_at":"2026-01-05T09:13:50.501106-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-fgq","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:07.146158-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-fpcv","title":"TEST: Verify document store enforces memory limits","description":"Write tests that: 1) Configure max document count 2) Attempt to exceed limit 3) Verify oldest/LRU documents evicted or error returned","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:09.187277-06:00","updated_at":"2026-01-06T08:00:21.050711-06:00","closed_at":"2026-01-06T08:00:21.050711-06:00","close_reason":"Closed"}
{"id":"firebase-fpk","title":"[GREEN] firestore.do: Implement Watch streams using mongo.do change streams","description":"Connect Firestore Listen targets to mongo.do watch(), stream responses","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:28.498551-06:00","updated_at":"2026-01-05T14:16:56.136126-06:00","closed_at":"2026-01-05T14:16:56.136126-06:00","close_reason":"Already implemented in src/firestore/watch.ts - Complete Watch/Listen streaming with watchDocument, watchQuery functions, DocumentSnapshot, QuerySnapshot types, change detection (added/modified/removed), resume tokens, and subscribeToDocumentChanges integration","dependencies":[{"issue_id":"firebase-fpk","depends_on_id":"firebase-8hh","type":"blocks","created_at":"2026-01-05T09:15:15.356382-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-fwjm","title":"TEST: Verify regex execution terminates on timeout","description":"Write tests with catastrophic backtracking patterns that would hang - verify they're terminated not just warned","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-06T07:00:54.502894-06:00","updated_at":"2026-01-06T07:00:54.502894-06:00"}
{"id":"firebase-g3zf","title":"FEAT: Implement unified FirebaseConfig service","description":"Create central config that auth, firestore, storage, rules all read from","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:00.60342-06:00","updated_at":"2026-01-06T07:01:00.60342-06:00","dependencies":[{"issue_id":"firebase-g3zf","depends_on_id":"firebase-tf3n","type":"blocks","created_at":"2026-01-06T07:06:58.656276-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-g65e","title":"FIX: Standardize error messages to use template literals","description":"Replace string concatenation in error messages with template literals throughout codebase","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:14.899662-06:00","updated_at":"2026-01-06T07:00:14.899662-06:00","dependencies":[{"issue_id":"firebase-g65e","depends_on_id":"firebase-jqdp","type":"blocks","created_at":"2026-01-06T07:08:36.271857-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-g93","title":"Functions: Add function timeout enforcement","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:05:17.881696-06:00","updated_at":"2026-01-06T10:22:50.676821-06:00","closed_at":"2026-01-06T10:22:50.676821-06:00","close_reason":"Closed"}
{"id":"firebase-gd5","title":"[REFACTOR] auth.do: Add OAuth provider metadata and error handling","description":"Handle provider-specific data, error cases, retry logic","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:51.071199-06:00","updated_at":"2026-01-05T09:11:51.071199-06:00","dependencies":[{"issue_id":"firebase-gd5","depends_on_id":"firebase-bbk","type":"blocks","created_at":"2026-01-05T09:13:31.413148-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-ge78","title":"FEAT: Implement Redis storage adapter","description":"Implement Redis-backed storage adapter conforming to StorageAdapter interface","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T07:00:26.926835-06:00","updated_at":"2026-01-06T07:00:26.926835-06:00","dependencies":[{"issue_id":"firebase-ge78","depends_on_id":"firebase-30kp","type":"blocks","created_at":"2026-01-06T07:05:42.607868-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-gwf1","title":"FEAT: Implement basic indexing for Firestore queries","description":"Add index structures for commonly queried fields, update queries to use indexes when available","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:04.243714-06:00","updated_at":"2026-01-06T07:01:04.243714-06:00","dependencies":[{"issue_id":"firebase-gwf1","depends_on_id":"firebase-5zjd","type":"blocks","created_at":"2026-01-06T07:06:02.948716-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-hlt","title":"[RED] storage.do: Test object CRUD endpoints","description":"Write failing tests for GET/POST/DELETE object at /storage/v1/b/{bucket}/o/{object}","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:07.037901-06:00","updated_at":"2026-01-05T09:58:22.700023-06:00","closed_at":"2026-01-05T09:58:22.700023-06:00","close_reason":"RED phase tests written","dependencies":[{"issue_id":"firebase-hlt","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:15:21.910023-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-hsm","title":"[GREEN] firestore.do: Implement document CRUD via mongo.do","description":"Translate Firestore document operations to mongo.do, handle path format","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:08.9435-06:00","updated_at":"2026-01-05T14:16:29.095433-06:00","closed_at":"2026-01-05T14:16:29.095433-06:00","close_reason":"Already implemented in src/firestore/crud.ts - Complete document CRUD operations with getDocument, updateDocument, deleteDocument functions, plus field masks, preconditions, document change events, and path validation","dependencies":[{"issue_id":"firebase-hsm","depends_on_id":"firebase-6vh","type":"blocks","created_at":"2026-01-05T09:14:33.490338-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-hsn","title":"rules.do: Firebase Security Rules engine","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-05T09:10:50.434443-06:00","updated_at":"2026-01-05T09:10:50.434443-06:00"}
{"id":"firebase-huy","title":"[GREEN] e2e: Verify storage.do compatibility with Storage SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:38.149617-06:00","updated_at":"2026-01-06T09:57:16.511594-06:00","closed_at":"2026-01-06T09:57:16.511594-06:00","close_reason":"Closed"}
{"id":"firebase-hvs","title":"Missing Test Coverage Tool","description":"## Problem\n@vitest/coverage-v8 not installed but configured in vitest.config.ts. Coverage reports cannot be generated.\n\n## TDD Approach\n\n### RED\nVerify coverage config:\n- Check vitest.config.ts coverage settings\n- Attempt to run coverage and document failure\n- Identify missing dependencies\n\n### GREEN\nInstall coverage dependencies:\n- npm install -D @vitest/coverage-v8\n- Verify coverage command works\n- Generate initial coverage report\n\n### REFACTOR\nSet coverage thresholds:\n- Configure minimum coverage percentages\n- Add coverage to CI pipeline\n- Set up coverage badges\n\n## Acceptance Criteria\n- [ ] @vitest/coverage-v8 installed\n- [ ] npm run coverage works\n- [ ] Coverage thresholds configured\n- [ ] Coverage integrated with CI","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T13:07:00.435715-06:00","updated_at":"2026-01-05T13:07:00.435715-06:00"}
{"id":"firebase-i2h","title":"[RED] firestore.do: Test StructuredQuery translation","description":"Write failing tests for where, orderBy, limit, startAt/endAt translation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:14.981463-06:00","updated_at":"2026-01-05T09:39:57.4882-06:00","closed_at":"2026-01-05T09:39:57.4882-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-i9v","title":"Auth: Hardcoded Project ID","description":"## Problem\nPROJECT_ID is hardcoded as 'test-project' in the Identity Toolkit implementation.\n\n## Location\n`src/auth/identity-toolkit.ts:134`\n\n## Impact\n- All tokens are issued with the same project ID regardless of configuration\n- Multi-project setups will fail\n- Token validation against real Firebase projects will fail\n\n## TDD Plan\n\n### RED: Write failing tests\n```typescript\ndescribe('Identity Toolkit Project ID', () =\u003e {\n  it('should use configured project ID in tokens', async () =\u003e {\n    const config = { projectId: 'my-custom-project' };\n    const toolkit = createIdentityToolkit(config);\n    const token = await toolkit.signInWithPassword(email, password);\n    const decoded = decodeToken(token.idToken);\n    expect(decoded.aud).toBe('my-custom-project');\n  });\n\n  it('should use PROJECT_ID from environment', async () =\u003e {\n    process.env.PROJECT_ID = 'env-project';\n    const toolkit = createIdentityToolkit();\n    const token = await toolkit.signInWithPassword(email, password);\n    expect(decodeToken(token.idToken).aud).toBe('env-project');\n  });\n\n  it('should reject invalid project IDs', async () =\u003e {\n    expect(() =\u003e createIdentityToolkit({ projectId: '' }))\n      .toThrow('Invalid project ID');\n  });\n});\n```\n\n### GREEN: Implementation\n1. Accept PROJECT_ID from constructor config\n2. Fall back to `process.env.PROJECT_ID` or `process.env.GCLOUD_PROJECT`\n3. Use configured project ID in all token generation\n\n### REFACTOR: Improvements\n1. Add project ID validation (format, length, allowed characters)\n2. Add warning when using default/fallback project ID\n3. Document project ID configuration options","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:02.436976-06:00","updated_at":"2026-01-05T14:06:25.547437-06:00","closed_at":"2026-01-05T14:06:25.547437-06:00","close_reason":"Closed"}
{"id":"firebase-icq","title":"Fix tsconfig.build.json to exclude tests from build","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:03:29.358256-06:00","updated_at":"2026-01-05T12:15:24.479937-06:00","closed_at":"2026-01-05T12:15:24.479937-06:00","close_reason":"Implemented in current session"}
{"id":"firebase-iqp","title":"[RED] rules.do: Test request context building","description":"Write failing tests for request.auth, request.resource, request.method context","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:32.52406-06:00","updated_at":"2026-01-05T14:19:30.294442-06:00","closed_at":"2026-01-05T14:19:30.294442-06:00","close_reason":"Tests exist in test/rules/evaluator.test.ts - request.auth and request.resource.data context building tests"}
{"id":"firebase-iym3","title":"FEAT: Convert Value to discriminated union type","description":"Refactor Value from optional properties interface to discriminated union with 'type' field","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:09:27.642352-06:00","updated_at":"2026-01-06T09:02:21.859569-06:00","closed_at":"2026-01-06T09:02:21.859569-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-iym3","depends_on_id":"firebase-n928","type":"blocks","created_at":"2026-01-06T07:09:44.523221-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-j2k","title":"[REFACTOR] functions.do: Add function metadata and introspection","description":"Function descriptions, parameter schemas, versioning","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:18.737904-06:00","updated_at":"2026-01-05T09:12:18.737904-06:00","dependencies":[{"issue_id":"firebase-j2k","depends_on_id":"firebase-557","type":"blocks","created_at":"2026-01-05T09:14:39.282432-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-j2t","title":"[REFACTOR] firestore.do: Add resume tokens and reconnection handling","description":"Implement resume tokens, handle reconnection, optimize fan-out","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:19.701355-06:00","updated_at":"2026-01-05T09:13:19.701355-06:00","dependencies":[{"issue_id":"firebase-j2t","depends_on_id":"firebase-fpk","type":"blocks","created_at":"2026-01-05T09:15:21.988415-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-j38","title":"[GREEN] rules.do: Implement path pattern matching","description":"Match document paths to rules, extract wildcards","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:07.023997-06:00","updated_at":"2026-01-05T14:16:35.124198-06:00","closed_at":"2026-01-05T14:16:35.124198-06:00","close_reason":"Already implemented in src/rules/path-matcher.ts - includes matchPath, matchCollectionGroup, extractWildcards, hasWildcards, getWildcardNames, isValidPattern with support for literal paths, single-segment wildcards {userId}, and recursive wildcards {path=**}","dependencies":[{"issue_id":"firebase-j38","depends_on_id":"firebase-5pd","type":"blocks","created_at":"2026-01-05T09:14:34.586883-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-jb0x","title":"FIX: Split large test files by feature","description":"Split batch.test.ts into batch-create.test.ts, batch-update.test.ts, batch-delete.test.ts, batch-transaction.test.ts","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:00.944705-06:00","updated_at":"2026-01-06T07:02:00.944705-06:00","dependencies":[{"issue_id":"firebase-jb0x","depends_on_id":"firebase-3l6z","type":"blocks","created_at":"2026-01-06T07:07:28.091031-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-jdg","title":"[RED] rules.do: Test Firestore rules DSL parsing","description":"Write failing tests for parsing match blocks, allow statements, functions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:06.568166-06:00","updated_at":"2026-01-05T14:19:43.195555-06:00","closed_at":"2026-01-05T14:19:43.195555-06:00","close_reason":"Tests exist in test/rules/parser.test.ts - comprehensive Firestore rules DSL parsing tests covering all syntax elements"}
{"id":"firebase-jger","title":"REFACTOR: Centralize email validation across all auth endpoints","description":"Extract email validation to shared isValidEmail() function used by signup, signin, and update","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:31.787432-06:00","updated_at":"2026-01-06T10:34:20.201073-06:00","closed_at":"2026-01-06T10:34:20.201073-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-jger","depends_on_id":"firebase-0ewr","type":"blocks","created_at":"2026-01-06T07:01:31.788477-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-joo","title":"Functions: Missing instanceId and rawRequest in Context","description":"## Problem\n`CallableContext` only has the `auth` field, but the README claims \"Full CallableContext with auth, instance ID, raw request\". This is a documentation/implementation mismatch.\n\n## Location\n`src/functions/callable.ts:37-39`\n\n## Impact\n- Functions expecting `context.instanceId` will get undefined\n- Functions needing access to raw request headers/body will fail\n- Breaks compatibility with code written for Firebase Functions\n\n## TDD Plan\n\n### RED: Write failing tests\n```typescript\ndescribe('CallableContext Fields', () =\u003e {\n  it('should include instanceId in context', async () =\u003e {\n    const handler = (data: any, context: CallableContext) =\u003e {\n      expect(context.instanceId).toBeDefined();\n      expect(typeof context.instanceId).toBe('string');\n      return { received: true };\n    };\n    \n    const callable = createCallable(handler);\n    await callable({ test: true });\n  });\n\n  it('should include rawRequest in context', async () =\u003e {\n    const handler = (data: any, context: CallableContext) =\u003e {\n      expect(context.rawRequest).toBeDefined();\n      expect(context.rawRequest.headers).toBeDefined();\n      expect(context.rawRequest.body).toBeDefined();\n      return { received: true };\n    };\n    \n    const callable = createCallable(handler);\n    await callable({ test: true }, mockRequest);\n  });\n\n  it('should include app check token if present', async () =\u003e {\n    const handler = (data: any, context: CallableContext) =\u003e {\n      expect(context.app).toBeDefined();\n      expect(context.app.appId).toBe('test-app-id');\n      return { received: true };\n    };\n    \n    const callable = createCallable(handler);\n    await callable({ test: true }, requestWithAppCheck);\n  });\n});\n```\n\n### GREEN: Implementation\n1. Add `instanceId` field - generate unique ID per function invocation\n2. Add `rawRequest` field - pass through the original HTTP request object\n3. Add `app` field for App Check context when present\n\n```typescript\ninterface CallableContext {\n  auth?: {\n    uid: string;\n    token: DecodedIdToken;\n  };\n  instanceId: string;\n  rawRequest: Request;\n  app?: {\n    appId: string;\n  };\n}\n```\n\n### REFACTOR: Improvements\n1. Document all context fields in README and JSDoc\n2. Add TypeScript types matching Firebase SDK exactly\n3. Add examples showing context field usage","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:22.659118-06:00","updated_at":"2026-01-05T14:06:06.531537-06:00","closed_at":"2026-01-05T14:06:06.531537-06:00","close_reason":"Closed"}
{"id":"firebase-jqdp","title":"TEST: Verify consistent error message formatting","description":"Create lint rule or test checking error messages use consistent format (template literals)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:04.754398-06:00","updated_at":"2026-01-06T07:00:04.754398-06:00"}
{"id":"firebase-jrk","title":"[GREEN] e2e: Verify functions.do compatibility with Functions SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:48.624752-06:00","updated_at":"2026-01-06T09:58:41.01042-06:00","closed_at":"2026-01-06T09:58:41.01042-06:00","close_reason":"Closed"}
{"id":"firebase-k7s","title":"Firestore: Unify document stores between crud.ts and batch.ts","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:04:07.621221-06:00","updated_at":"2026-01-05T12:35:37.788131-06:00","closed_at":"2026-01-05T12:35:37.788131-06:00","close_reason":"Implemented with parallel agents"}
{"id":"firebase-km9e","title":"FIX: Create discriminated union types for batch API responses","description":"Replace `Promise\u003c{ status: number; body: any }\u003e` with proper discriminated union: `ApiResponse\u003cT\u003e`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:02:46.180652-06:00","updated_at":"2026-01-06T09:33:45.091755-06:00","closed_at":"2026-01-06T09:33:45.091755-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-km9e","depends_on_id":"firebase-0je9","type":"blocks","created_at":"2026-01-06T07:03:49.99762-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-kmy","title":"Firestore: IS_NAN Filter Uses Invalid MongoDB Syntax","description":"## Problem\nUses `{ $type: 'double', $eq: NaN }` which is invalid MongoDB syntax for NaN detection.\n\n## Location\n`src/firestore/query.ts:287-290`\n\n## TDD Plan\n\n### RED: Write failing tests\nWrite tests that validate against real MongoDB:\n- Test IS_NAN filter produces valid MongoDB query\n- Test IS_NAN correctly matches NaN values in documents\n- Test IS_NAN doesn't match non-NaN numbers\n- Test IS_NOT_NAN filter works correctly\n\n### GREEN: Make tests pass\nUse $expr with $isNan operator:\n- Replace invalid syntax with `{ $expr: { $isNaN: \"$fieldPath\" } }`\n- Handle nested field paths correctly\n- Ensure IS_NOT_NAN uses `{ $expr: { $not: { $isNaN: \"$fieldPath\" } } }`\n\n### REFACTOR: Improve code quality\nAdd query validation layer:\n- Create utility to validate MongoDB query syntax\n- Add tests for all special value filters (NaN, null, etc.)\n- Consider adding query dry-run validation in dev mode","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:00.970645-06:00","updated_at":"2026-01-05T14:10:08.544208-06:00","closed_at":"2026-01-05T14:10:08.544208-06:00","close_reason":"Closed"}
{"id":"firebase-knv","title":"[RED] auth.do: Test Firebase-compatible JWT generation","description":"Write failing tests that verify JWT structure matches Firebase format (iss, aud, sub, firebase claims, exp, iat)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:18.74379-06:00","updated_at":"2026-01-05T09:28:07.483926-06:00","closed_at":"2026-01-05T09:28:07.483926-06:00","close_reason":"JWT tests implemented in test/auth/jwt.test.ts - 35 tests covering header structure, payload claims, expiration, firebase claim, custom claims, key rotation"}
{"id":"firebase-knx","title":"[firebase] Package not published to npm","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T12:09:34.264933-06:00","updated_at":"2026-01-05T12:09:34.264933-06:00"}
{"id":"firebase-kuc","title":"Firestore runQuery Not Implemented","description":"## Problem\nThe runQuery function throws a \"Not implemented\" error, making Firestore queries non-functional.\n\n## Location\n- src/firestore/query.ts:615-617\n\n## TDD Approach\n\n### RED: Write Failing Tests\n- Write tests for simple equality queries\n- Write tests for compound queries (AND/OR)\n- Write tests for range queries (\u003e, \u003c, \u003e=, \u003c=)\n- Write tests for array-contains and array-contains-any\n- Write tests for orderBy and limit\n- Write tests for cursor pagination (startAt, endAt, startAfter, endBefore)\n\n### GREEN: Implement MongoDB Query Execution\n- Translate Firestore StructuredQuery to MongoDB query syntax\n- Handle field paths and nested document queries\n- Implement proper cursor handling\n- Execute queries against MongoDB backend\n- Return properly formatted Firestore documents\n\n### REFACTOR: Optimize Query Translation\n- Cache compiled query plans\n- Add query validation before execution\n- Implement query explain for debugging\n- Add index suggestions for slow queries","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-05T13:05:57.901412-06:00","updated_at":"2026-01-05T13:37:48.527457-06:00","closed_at":"2026-01-05T13:37:48.527457-06:00","close_reason":"Implemented runQuery() that executes StructuredQuery against in-memory document store. Supports filters (equality, range, IN, ARRAY_CONTAINS), sorting, limit, offset, and projection."}
{"id":"firebase-kxsw","title":"TEST: Verify test directory only contains source files","description":"Create check that test/ has no .js or .d.ts files (should be in gitignore)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:04:57.995191-06:00","updated_at":"2026-01-06T07:04:57.995191-06:00"}
{"id":"firebase-lce6","title":"REFACTOR: Inject storage adapters via dependency injection","description":"Update all modules to accept storage adapters as constructor/function parameters instead of importing directly","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:07.178348-06:00","updated_at":"2026-01-06T07:00:07.178348-06:00","dependencies":[{"issue_id":"firebase-lce6","depends_on_id":"firebase-30kp","type":"blocks","created_at":"2026-01-06T07:05:35.801663-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-lfwh","title":"REFACTOR: Create error message factory functions","description":"Create createError('INVALID_ADDRESS', { address }) that handles formatting, i18n-ready","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:26.177255-06:00","updated_at":"2026-01-06T07:00:26.177255-06:00","dependencies":[{"issue_id":"firebase-lfwh","depends_on_id":"firebase-g65e","type":"blocks","created_at":"2026-01-06T07:08:41.572837-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-luz","title":"Firestore: Server Missing Request Body Validation","description":"## Problem\nvalidateFields doesn't validate field types properly, allowing malformed requests that could cause runtime errors or data corruption.\n\n## Location\n`src/firestore/server.ts:269-315`\n\n## TDD Plan\n\n### RED: Write failing tests\nWrite tests with malformed field values:\n- Test rejects invalid field value types\n- Test rejects malformed GeoPoint (missing lat/lng)\n- Test rejects malformed Timestamp (invalid format)\n- Test rejects invalid reference paths\n- Test rejects nested objects exceeding depth limit\n- Test rejects oversized field values\n\n### GREEN: Make tests pass\nAdd strict schema validation:\n- Validate all Firestore value types match expected schema\n- Add type guards for each value type\n- Return descriptive error messages for invalid fields\n- Validate field paths are valid (no empty segments, valid chars)\n- Add size limits validation\n\n### REFACTOR: Improve code quality\nCreate shared validation utilities:\n- Extract validation logic into reusable module\n- Create TypeScript type guards for all Firestore types\n- Add validation for batch operations\n- Consider using zod or similar for schema validation\n- Add validation performance benchmarks","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:21.368439-06:00","updated_at":"2026-01-05T14:10:08.542116-06:00","closed_at":"2026-01-05T14:10:08.542116-06:00","close_reason":"Closed"}
{"id":"firebase-m3j","title":"[RED] storage.do: Test list and listAll endpoints","description":"Write failing tests for prefix listing, pagination, delimiter handling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:25.467775-06:00","updated_at":"2026-01-05T14:18:43.59974-06:00","closed_at":"2026-01-05T14:18:43.59974-06:00","close_reason":"Tests exist in test/storage/crud.test.ts - List Operations section covers listObjects with pagination, prefixes, and delimiters","dependencies":[{"issue_id":"firebase-m3j","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:23.017841-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-m536","title":"FIX: Call storeRefreshToken() after generating refresh tokens","description":"In identity-toolkit.ts lines 310, 367, 519 - call storeRefreshToken(refreshToken, user.localId) after generating refresh tokens","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T07:00:47.201464-06:00","updated_at":"2026-01-06T07:24:13.584667-06:00","closed_at":"2026-01-06T07:24:13.584667-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-m536","depends_on_id":"firebase-xhm","type":"blocks","created_at":"2026-01-06T07:00:47.20246-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-m70","title":"TEST: Verify type-safe binary operations in rules evaluator","description":"Write tests for all binary operators (\u003c, \u003e, +, -, *, /, %) with incompatible types to ensure proper errors, not runtime crashes","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T06:59:55.598283-06:00","updated_at":"2026-01-06T07:31:45.901371-06:00","closed_at":"2026-01-06T07:31:45.901371-06:00","close_reason":"Closed"}
{"id":"firebase-mbi8","title":"REFACTOR: Create centralized error handling utilities","description":"Create shared error type guards and handlers: isFirestoreError(), isAuthError(), handleUnknownError()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:50.149868-06:00","updated_at":"2026-01-06T10:36:49.802303-06:00","closed_at":"2026-01-06T10:36:49.802303-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-mbi8","depends_on_id":"firebase-7hm9","type":"blocks","created_at":"2026-01-06T07:02:14.718426-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-meq","title":"[GREEN] e2e: Verify auth.do compatibility with Firebase Auth SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:06.672849-06:00","updated_at":"2026-01-06T09:57:45.263799-06:00","closed_at":"2026-01-06T09:57:45.263799-06:00","close_reason":"Closed"}
{"id":"firebase-mixr","title":"TEST: Verify type-safe error handling in Firestore server","description":"Write tests that throw various error types and verify proper handling without any casts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:27.947506-06:00","updated_at":"2026-01-06T07:46:36.464653-06:00","closed_at":"2026-01-06T07:46:36.464653-06:00","close_reason":"Closed"}
{"id":"firebase-mjjj","title":"REFACTOR: Create TokenStore class with automatic TTL management","description":"Extract token storage into a dedicated class with configurable TTL, max size, and cleanup intervals","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:00.928549-06:00","updated_at":"2026-01-06T07:00:00.928549-06:00","dependencies":[{"issue_id":"firebase-mjjj","depends_on_id":"firebase-5ko","type":"blocks","created_at":"2026-01-06T07:00:55.464823-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-mjwm","title":"TEST: Comprehensive input validation for all auth endpoints","description":"Write fuzz-style tests for all auth endpoints: null, undefined, empty strings, very long strings, special characters","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T07:01:36.620629-06:00","updated_at":"2026-01-06T10:31:55.766551-06:00","closed_at":"2026-01-06T10:31:55.766551-06:00","close_reason":"Closed"}
{"id":"firebase-mmg","title":"[RED] functions.do: Test streaming callable functions","description":"Write failing tests for httpsCallable.stream() NDJSON responses","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:34.429469-06:00","updated_at":"2026-01-06T08:01:20.517252-06:00","closed_at":"2026-01-06T08:01:20.517252-06:00","close_reason":"Closed"}
{"id":"firebase-moq2","title":"FIX: Standardize environment variable naming to SCREAMING_SNAKE_CASE","description":"Change FIREBASE_projectId to FIREBASE_PROJECT_ID throughout codebase, add backwards compat","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:34.988089-06:00","updated_at":"2026-01-06T07:00:34.988089-06:00","dependencies":[{"issue_id":"firebase-moq2","depends_on_id":"firebase-6w54","type":"blocks","created_at":"2026-01-06T07:06:46.441874-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-mtm","title":"TEST: Verify expired refresh tokens are cleaned up periodically","description":"Write tests that: 1) Create many tokens 2) Wait for expiration 3) Verify memory is reclaimed without access 4) Test cleanup runs on schedule","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T06:59:46.954034-06:00","updated_at":"2026-01-06T07:32:49.31201-06:00","closed_at":"2026-01-06T07:32:49.31201-06:00","close_reason":"Closed"}
{"id":"firebase-mxi","title":"[REFACTOR] storage.do: Add metadata search and filtering","description":"Query by metadata, custom metadata indexes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:38.590979-06:00","updated_at":"2026-01-05T09:12:38.590979-06:00","dependencies":[{"issue_id":"firebase-mxi","depends_on_id":"firebase-fgq","type":"blocks","created_at":"2026-01-05T09:13:56.713089-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-mxi","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:16:14.953818-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-mywu","title":"FIX: Create and use error classes consistently","description":"Create AuthError, FirestoreError, StorageError, RulesError base classes, use throughout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:19.971845-06:00","updated_at":"2026-01-06T10:44:47.796468-06:00","closed_at":"2026-01-06T10:44:47.796468-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-mywu","depends_on_id":"firebase-qtrq","type":"blocks","created_at":"2026-01-06T07:09:47.313733-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-n928","title":"TEST: Verify Value type narrowing works correctly","description":"Write tests demonstrating type narrowing challenges with current Value type","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:09:21.208226-06:00","updated_at":"2026-01-06T08:12:49.654084-06:00","closed_at":"2026-01-06T08:12:49.654084-06:00","close_reason":"Closed"}
{"id":"firebase-nf4x","title":"FIX: Remove compiled files from test directory and update gitignore","description":"Delete test/**/*.js, test/**/*.d.ts, add to .gitignore, update tsconfig outDir","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:05:04.632749-06:00","updated_at":"2026-01-06T07:05:04.632749-06:00","dependencies":[{"issue_id":"firebase-nf4x","depends_on_id":"firebase-kxsw","type":"blocks","created_at":"2026-01-06T07:07:42.858643-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-njgp","title":"TEST: Verify nested map access handles missing paths","description":"Write tests for getFieldByPath with missing intermediate paths - should not throw","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:03.273799-06:00","updated_at":"2026-01-06T10:31:17.395221-06:00","closed_at":"2026-01-06T10:31:17.395221-06:00","close_reason":"Closed"}
{"id":"firebase-njp2","title":"FIX: Add division by zero guard in evaluator","description":"In evaluator.ts line 809, check for zero divisor and throw EvaluationError","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T07:00:10.489029-06:00","updated_at":"2026-01-06T07:34:33.414834-06:00","closed_at":"2026-01-06T07:34:33.414834-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-njp2","depends_on_id":"firebase-p5tb","type":"blocks","created_at":"2026-01-06T07:05:22.199129-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-nog0","title":"TEST: Verify stale resumable upload sessions are cleaned up","description":"Write tests that abandoned upload sessions are cleaned after timeout period","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:30.045333-06:00","updated_at":"2026-01-06T08:13:00.355141-06:00","closed_at":"2026-01-06T08:13:00.355141-06:00","close_reason":"Closed"}
{"id":"firebase-nt5","title":"[RED] e2e: Test callable functions with Firebase SDK","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:43.385659-06:00","updated_at":"2026-01-05T09:13:43.385659-06:00"}
{"id":"firebase-nzg","title":"Auth: Implement proper JWT signature verification","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:03:41.813954-06:00","updated_at":"2026-01-05T12:35:37.786301-06:00","closed_at":"2026-01-05T12:35:37.786301-06:00","close_reason":"Implemented with parallel agents"}
{"id":"firebase-oge","title":"[GREEN] e2e: Verify firestore.do compatibility with Firestore SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:17.151484-06:00","updated_at":"2026-01-06T09:57:31.820635-06:00","closed_at":"2026-01-06T09:57:31.820635-06:00","close_reason":"Closed"}
{"id":"firebase-ohq","title":"[REFACTOR] functions.do: Add request validation and error mapping","description":"Validate input schema, map errors to Firebase error codes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:17.799358-06:00","updated_at":"2026-01-05T09:11:17.799358-06:00","dependencies":[{"issue_id":"firebase-ohq","depends_on_id":"firebase-qrw","type":"blocks","created_at":"2026-01-05T09:14:14.573896-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-olmm","title":"REFACTOR: Create shared validation schemas with Zod","description":"Define Zod schemas for all request types, validate at handler entry points","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:56.160837-06:00","updated_at":"2026-01-06T07:01:56.160837-06:00","dependencies":[{"issue_id":"firebase-olmm","depends_on_id":"firebase-c31z","type":"blocks","created_at":"2026-01-06T07:06:31.663095-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-oob","title":"Auth: Missing Disabled Account Check","description":"## Problem\nThe `signInWithPassword` function does not check if `user.disabled` is true before allowing sign-in. Disabled accounts can still authenticate.\n\n## Location\n`src/auth/identity-toolkit.ts:219-242`\n\n## Impact\n- Disabled/banned users can still sign in\n- Admin disable action has no effect on authentication\n- Security violation - cannot effectively block compromised accounts\n\n## TDD Plan\n\n### RED: Write failing tests\n```typescript\ndescribe('Disabled Account Sign-in', () =\u003e {\n  it('should reject sign-in for disabled accounts', async () =\u003e {\n    const user = await createUser({ email, password });\n    await disableUser(user.uid);\n    \n    await expect(signInWithPassword(email, password))\n      .rejects.toMatchObject({\n        code: 'USER_DISABLED',\n        message: expect.stringContaining('disabled')\n      });\n  });\n\n  it('should allow sign-in after re-enabling account', async () =\u003e {\n    const user = await createUser({ email, password });\n    await disableUser(user.uid);\n    await enableUser(user.uid);\n    \n    const result = await signInWithPassword(email, password);\n    expect(result.idToken).toBeDefined();\n  });\n\n  it('should reject token refresh for disabled accounts', async () =\u003e {\n    const { refreshToken } = await signInWithPassword(email, password);\n    await disableUser(user.uid);\n    \n    await expect(signInWithRefreshToken(refreshToken))\n      .rejects.toMatchObject({ code: 'USER_DISABLED' });\n  });\n});\n```\n\n### GREEN: Implementation\n1. Add `user.disabled` check in `signInWithPassword` before credential validation\n2. Return `USER_DISABLED` error code matching Firebase behavior\n3. Also check disabled status in token refresh flow\n\n### REFACTOR: Improvements\n1. Add account lockout support (auto-disable after N failed attempts)\n2. Add lockout duration and automatic re-enable\n3. Track failed sign-in attempts per account\n4. Add admin notification for lockouts","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:16.033108-06:00","updated_at":"2026-01-05T14:06:25.545834-06:00","closed_at":"2026-01-05T14:06:25.545834-06:00","close_reason":"Closed"}
{"id":"firebase-ozg","title":"Firestore: Implement runQuery function","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T12:04:22.052243-06:00","updated_at":"2026-01-05T13:42:26.593639-06:00","closed_at":"2026-01-05T13:42:26.593639-06:00","close_reason":"Already fixed in P0 work"}
{"id":"firebase-p0ah","title":"REFACTOR: Create sanitizeUserResponse() to strip sensitive fields","description":"Create a helper function that removes sensitive fields (passwordHash, etc) before returning user data","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:24.371968-06:00","updated_at":"2026-01-06T07:01:24.371968-06:00","dependencies":[{"issue_id":"firebase-p0ah","depends_on_id":"firebase-th01","type":"blocks","created_at":"2026-01-06T07:01:24.37307-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-p3d","title":"[RED] rules.do: Test rules expression evaluation","description":"Write failing tests for request.auth, resource.data, get(), exists() evaluation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:13.256182-06:00","updated_at":"2026-01-05T09:36:13.699371-06:00","closed_at":"2026-01-05T09:36:13.699371-06:00","close_reason":"Rules expression evaluator tests implemented in test/rules/evaluator.test.ts"}
{"id":"firebase-p5tb","title":"TEST: Verify division by zero handled in rules evaluator","description":"Write tests for division by zero in security rules: 1 / 0, 0 / 0, x / (y - y) - should throw or return specific error","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T07:00:01.005608-06:00","updated_at":"2026-01-06T07:26:37.624892-06:00","closed_at":"2026-01-06T07:26:37.624892-06:00","close_reason":"Closed"}
{"id":"firebase-pkq","title":"[RED] e2e: Test Storage operations with Firebase SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:32.905066-06:00","updated_at":"2026-01-06T09:56:01.89533-06:00","closed_at":"2026-01-06T09:56:01.89533-06:00","close_reason":"Closed"}
{"id":"firebase-pn2q","title":"REFACTOR: Use BigInt for column calculations if needed","description":"Consider BigInt for large column numbers or enforce reasonable limits","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:28.262804-06:00","updated_at":"2026-01-06T07:01:28.262804-06:00","dependencies":[{"issue_id":"firebase-pn2q","depends_on_id":"firebase-54mz","type":"blocks","created_at":"2026-01-06T07:06:15.196742-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-pqu","title":"TypeScript Build Errors Block Publishing","description":"## Problem\n34 TypeScript compilation errors prevent npm publish. The build is currently broken and the package cannot be published to npm.\n\n## Files Affected\n- identity-toolkit.ts\n- server.ts\n- values.ts\n- watch.ts\n- builtins.ts\n- evaluator.ts\n- parser.ts\n\n## TDD Approach\n\n### RED: Write Failing Tests\n- Write tests that verify `npm run build` succeeds with exit code 0\n- Write tests that verify `tsc --noEmit` passes without errors\n- Write tests that check for expected type exports\n\n### GREEN: Fix All 34 TypeScript Errors\n- Fix type mismatches in identity-toolkit.ts\n- Fix type errors in server.ts\n- Fix type issues in values.ts\n- Fix type problems in watch.ts\n- Fix type errors in builtins.ts\n- Fix type issues in evaluator.ts\n- Fix type problems in parser.ts\n\n### REFACTOR: Improve Type Safety\n- Add stricter TypeScript compiler options\n- Enable strict mode if not already enabled\n- Add explicit return types to public APIs\n- Consider using branded types for better type safety","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T13:05:49.403945-06:00","updated_at":"2026-01-05T14:04:19.212818-06:00","closed_at":"2026-01-05T14:04:19.212818-06:00","close_reason":"Build is now passing - all TypeScript errors fixed"}
{"id":"firebase-pud","title":"[REFACTOR] rules.do: Add rules versioning and diffing","description":"Version history, diff view, gradual rollout","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:19.341832-06:00","updated_at":"2026-01-05T09:13:19.341832-06:00","dependencies":[{"issue_id":"firebase-pud","depends_on_id":"firebase-qat","type":"blocks","created_at":"2026-01-05T09:15:16.599734-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-pw2","title":"[REFACTOR] firestore.do: Add transaction timeout and deadlock detection","description":"Handle long-running transactions, detect deadlocks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:25.764408-06:00","updated_at":"2026-01-05T09:13:25.764408-06:00","dependencies":[{"issue_id":"firebase-pw2","depends_on_id":"firebase-40n","type":"blocks","created_at":"2026-01-05T09:15:34.235719-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-pwz1","title":"REFACTOR: Migrate to Hono for cross-platform HTTP routing","description":"Use Hono for routing/middleware to support Node, Deno, Bun, Cloudflare Workers uniformly","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:17.137639-06:00","updated_at":"2026-01-06T07:02:17.137639-06:00","dependencies":[{"issue_id":"firebase-pwz1","depends_on_id":"firebase-vjva","type":"blocks","created_at":"2026-01-06T07:06:37.4131-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-pygo","title":"FIX: Standardize test assertions to vitest expect API","description":"Convert any chai-style or assert-style to vitest expect() consistently","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:44.616691-06:00","updated_at":"2026-01-06T07:02:44.616691-06:00","dependencies":[{"issue_id":"firebase-pygo","depends_on_id":"firebase-3n5r","type":"blocks","created_at":"2026-01-06T07:09:59.074614-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-qat","title":"[GREEN] rules.do: Implement rules deployment storage","description":"Store rules versions, atomic activation, rollback","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:26.396036-06:00","updated_at":"2026-01-06T08:01:33.947803-06:00","closed_at":"2026-01-06T08:01:33.947803-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-qat","depends_on_id":"firebase-5y5","type":"blocks","created_at":"2026-01-05T09:15:11.331441-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-qgpx","title":"TEST: Verify no unused variables in codebase","description":"Add ESLint rule for unused variables, create baseline","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:57.548582-06:00","updated_at":"2026-01-06T07:00:57.548582-06:00"}
{"id":"firebase-qk9","title":"firestore.do: Firestore REST/Watch API compatibility","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-05T09:10:50.775155-06:00","updated_at":"2026-01-05T09:10:50.775155-06:00"}
{"id":"firebase-qrw","title":"[GREEN] functions.do: Implement callable function handler","description":"Parse callable requests, invoke worker, format response","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:11.670954-06:00","updated_at":"2026-01-05T14:16:15.647495-06:00","closed_at":"2026-01-05T14:16:15.647495-06:00","close_reason":"Already implemented in src/functions/callable.ts - handleCallable() function handles callable function requests with full protocol support including validation, auth, CORS, and error handling","dependencies":[{"issue_id":"firebase-qrw","depends_on_id":"firebase-z7e","type":"blocks","created_at":"2026-01-05T09:14:09.221495-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-qtrq","title":"TEST: Verify all errors use typed error classes","description":"Create tests that catch errors and assert they are instances of appropriate error classes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:13.541427-06:00","updated_at":"2026-01-06T10:48:14.235567-06:00","closed_at":"2026-01-06T10:48:14.235567-06:00","close_reason":"Closed"}
{"id":"firebase-qty2","title":"FIX: Add JSDoc to undocumented exported functions","description":"Add JSDoc with @param, @returns, @example to functions in mongo.ts and others missing docs","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:05:29.814936-06:00","updated_at":"2026-01-06T07:05:29.814936-06:00","dependencies":[{"issue_id":"firebase-qty2","depends_on_id":"firebase-s0id","type":"blocks","created_at":"2026-01-06T07:07:56.571394-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-qx5p","title":"REFACTOR: Standardize npm script naming conventions","description":"Document and standardize script names: test, test:watch, test:coverage, build, lint, etc.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:04.350678-06:00","updated_at":"2026-01-06T07:00:04.350678-06:00","dependencies":[{"issue_id":"firebase-qx5p","depends_on_id":"firebase-fe53","type":"blocks","created_at":"2026-01-06T07:06:40.121178-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-r0c","title":"[REFACTOR] storage.do: Add URL caching and token validation","description":"Cache URLs, validate download tokens, rate limiting","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:53.402622-06:00","updated_at":"2026-01-05T09:12:53.402622-06:00","dependencies":[{"issue_id":"firebase-r0c","depends_on_id":"firebase-fap","type":"blocks","created_at":"2026-01-05T09:14:23.803216-06:00","created_by":"nathanclevenger"},{"issue_id":"firebase-r0c","depends_on_id":"firebase-72l","type":"parent-child","created_at":"2026-01-05T09:17:02.292106-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-r5ph","title":"REFACTOR: Enable strict unused variable checking","description":"Enable noUnusedLocals, noUnusedParameters in tsconfig, fix all violations","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:09.796005-06:00","updated_at":"2026-01-06T07:01:09.796005-06:00","dependencies":[{"issue_id":"firebase-r5ph","depends_on_id":"firebase-vzn7","type":"blocks","created_at":"2026-01-06T07:09:08.933454-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-r62","title":"TEST: Verify CI workflow runs correct test command","description":"Create a test that CI workflow yaml references existing npm scripts","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-06T06:59:49.855193-06:00","updated_at":"2026-01-06T06:59:49.855193-06:00"}
{"id":"firebase-r6qt","title":"TEST: Verify invalid email format rejected on user update","description":"Write tests that invalid emails like \"notanemail\", \"@missing.com\", \"spaces in@email.com\" are rejected with INVALID_EMAIL error","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T07:00:07.898337-06:00","updated_at":"2026-01-06T07:19:55.184523-06:00","closed_at":"2026-01-06T07:19:55.184523-06:00","close_reason":"Closed"}
{"id":"firebase-re5","title":"[REFACTOR] auth.do: Add user indexing and query optimization","description":"Add indexes on email, uid; optimize lookups","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:51.125393-06:00","updated_at":"2026-01-05T09:12:51.125393-06:00","dependencies":[{"issue_id":"firebase-re5","depends_on_id":"firebase-43x","type":"blocks","created_at":"2026-01-05T09:14:08.901808-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-reer","title":"REFACTOR: Create custom test matchers for common assertions","description":"Add custom matchers: toBeFirestoreDocument(), toBeValidToken(), etc.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:52.228391-06:00","updated_at":"2026-01-06T07:02:52.228391-06:00","dependencies":[{"issue_id":"firebase-reer","depends_on_id":"firebase-pygo","type":"blocks","created_at":"2026-01-06T07:10:04.422414-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-rho","title":"[RED] e2e: Test Firestore CRUD with Firebase SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:11.906789-06:00","updated_at":"2026-01-06T09:49:24.313037-06:00","closed_at":"2026-01-06T09:49:24.313037-06:00","close_reason":"Closed"}
{"id":"firebase-rqt","title":"Firestore: Transaction Conflict Detection Too Simplistic","description":"## Problem\nOnly compares updateTime, misses concurrent modifications that could cause data corruption.\n\n## Location\n`src/firestore/batch.ts:988-1004`\n\n## TDD Plan\n\n### RED: Write failing tests\nWrite tests for concurrent transaction conflicts:\n- Test two transactions reading same document detect conflict\n- Test transaction fails if document modified after read\n- Test transaction succeeds if unrelated documents modified\n- Test conflict detection with multiple documents in transaction\n- Test rapid concurrent updates to same document\n\n### GREEN: Make tests pass\nImplement optimistic lock with readSnapshot:\n- Store document version/snapshot at read time\n- Compare full read snapshot on commit, not just updateTime\n- Implement proper SERIALIZABLE isolation semantics\n- Add retry logic for transient conflicts\n\n### REFACTOR: Improve code quality\nAdd field-level conflict detection:\n- Track which fields were read vs written\n- Only conflict if overlapping fields modified\n- Add configurable isolation levels\n- Add transaction conflict metrics/logging","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:07.487801-06:00","updated_at":"2026-01-05T14:06:15.285556-06:00","closed_at":"2026-01-05T14:06:15.285556-06:00","close_reason":"Improved conflict detection to use full document comparison instead of just updateTime"}
{"id":"firebase-ruij","title":"TEST: Verify no console.log in production code","description":"Create lint rule or test that detects console.log/warn/error in src/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:39.000052-06:00","updated_at":"2026-01-06T10:52:51.135041-06:00","closed_at":"2026-01-06T10:52:51.135041-06:00","close_reason":"Closed"}
{"id":"firebase-rwqz","title":"REFACTOR: Create safe nested object accessor","description":"Build type-safe deepGet(obj, 'path.to.field') that handles missing intermediate values","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:22.096579-06:00","updated_at":"2026-01-06T07:02:22.096579-06:00","dependencies":[{"issue_id":"firebase-rwqz","depends_on_id":"firebase-s8ab","type":"blocks","created_at":"2026-01-06T07:06:44.665974-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-s0id","title":"TEST: Verify all exported functions have JSDoc","description":"Create ESLint rule or test that checks all exported functions have JSDoc comments","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:05:23.772129-06:00","updated_at":"2026-01-06T07:05:23.772129-06:00"}
{"id":"firebase-s1x","title":"[REFACTOR] rules.do: Add syntax validation and error messages","description":"Line numbers, helpful errors, syntax highlighting","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:44.123888-06:00","updated_at":"2026-01-05T09:12:44.123888-06:00","dependencies":[{"issue_id":"firebase-s1x","depends_on_id":"firebase-5ez","type":"blocks","created_at":"2026-01-05T09:14:14.01225-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-s8ab","title":"FIX: Replace non-null assertions with optional chaining","description":"In crud.ts lines 473-477, replace mapValue!.fields! with proper null checks and error handling","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:14.273931-06:00","updated_at":"2026-01-06T10:48:35.958564-06:00","closed_at":"2026-01-06T10:48:35.958564-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-s8ab","depends_on_id":"firebase-njgp","type":"blocks","created_at":"2026-01-06T07:06:38.154749-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-s9i","title":"[REFACTOR] auth.do: Optimize JWT generation and add edge cases","description":"Add key rotation, caching, error handling, claim validation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:31.084051-06:00","updated_at":"2026-01-05T09:11:31.084051-06:00","dependencies":[{"issue_id":"firebase-s9i","depends_on_id":"firebase-943","type":"blocks","created_at":"2026-01-05T09:13:17.07656-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-sa6","title":"[REFACTOR] auth.do: Add refresh token rotation and revocation","description":"Implement token rotation on refresh, revocation API","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:12:30.734648-06:00","updated_at":"2026-01-05T09:12:30.734648-06:00","dependencies":[{"issue_id":"firebase-sa6","depends_on_id":"firebase-1xy","type":"blocks","created_at":"2026-01-05T09:14:33.638021-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-shmf","title":"REFACTOR: Generate API documentation from JSDoc","description":"Add typedoc or similar to generate API reference docs from JSDoc comments","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:05:40.173034-06:00","updated_at":"2026-01-06T07:05:40.173034-06:00","dependencies":[{"issue_id":"firebase-shmf","depends_on_id":"firebase-qty2","type":"blocks","created_at":"2026-01-06T07:08:01.877354-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-sj1w","title":"REFACTOR: Create separate packages for non-Firebase utilities","description":"If modules are separate concern, create @firebase-do/spreadsheet or similar package","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:38.512421-06:00","updated_at":"2026-01-06T07:01:38.512421-06:00","dependencies":[{"issue_id":"firebase-sj1w","depends_on_id":"firebase-8uwk","type":"blocks","created_at":"2026-01-06T07:06:24.365175-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-tf3n","title":"TEST: Verify unified configuration interface","description":"Write tests for a unified FirebaseConfig interface that covers all modules","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:54.491474-06:00","updated_at":"2026-01-06T07:00:54.491474-06:00"}
{"id":"firebase-th01","title":"FIX: Remove passwordHash from API responses","description":"Remove passwordHash from responses in identity-toolkit.ts lines 404 and 500","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T07:00:53.449264-06:00","updated_at":"2026-01-06T07:22:08.649478-06:00","closed_at":"2026-01-06T07:22:08.649478-06:00","close_reason":"Closed","dependencies":[{"issue_id":"firebase-th01","depends_on_id":"firebase-z9vz","type":"blocks","created_at":"2026-01-06T07:00:53.450263-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-tl8","title":"[GREEN] e2e: Verify database.do compatibility with RTDB SDK","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:27.656286-06:00","updated_at":"2026-01-06T09:56:58.144477-06:00","closed_at":"2026-01-06T09:56:58.144477-06:00","close_reason":"RTDB not implemented in this project"}
{"id":"firebase-tow","title":"[GREEN] rules.do: Implement rules built-in functions","description":"Implement Firebase rules built-in function library","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:13.502265-06:00","updated_at":"2026-01-05T14:16:41.786025-06:00","closed_at":"2026-01-05T14:16:41.786025-06:00","close_reason":"Already implemented in src/rules/builtins.ts - includes document access (get, exists, getAfter, existsAfter), math ops, string ops (matches, size, split, lower, upper, trim, replace), list ops (hasAny, hasAll, hasOnly, size, join, concat, removeAll, toSet), set ops, map ops (keys, values, size, get, diff), timestamp/duration utilities, and type checking functions","dependencies":[{"issue_id":"firebase-tow","depends_on_id":"firebase-xho","type":"blocks","created_at":"2026-01-05T09:14:47.915573-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-ttz","title":"[REFACTOR] rules.do: Add context caching and validation","description":"Cache repeated context lookups, validate context shape","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:10.71815-06:00","updated_at":"2026-01-05T09:13:10.71815-06:00","dependencies":[{"issue_id":"firebase-ttz","depends_on_id":"firebase-05j","type":"blocks","created_at":"2026-01-05T09:15:04.734152-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-u1l","title":"Firestore: Implement proper transaction isolation and cleanup","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:04:14.059271-06:00","updated_at":"2026-01-05T12:35:37.788989-06:00","closed_at":"2026-01-05T12:35:37.788989-06:00","close_reason":"Implemented with parallel agents"}
{"id":"firebase-uz7","title":"[firebase] Missing README.md documentation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T12:09:21.056457-06:00","updated_at":"2026-01-05T12:09:21.056457-06:00"}
{"id":"firebase-uz99","title":"FIX: Replace console.* with proper logging abstraction","description":"Create logger interface, replace console.warn in safe-regex.ts and elsewhere","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:52.443012-06:00","updated_at":"2026-01-06T07:01:52.443012-06:00","dependencies":[{"issue_id":"firebase-uz99","depends_on_id":"firebase-ruij","type":"blocks","created_at":"2026-01-06T07:09:35.215769-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-v9wn","title":"FEAT: Implement D1/Cloudflare storage adapter","description":"Implement Cloudflare D1-backed storage adapter conforming to StorageAdapter interface","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T07:00:44.494688-06:00","updated_at":"2026-01-06T07:00:44.494688-06:00","dependencies":[{"issue_id":"firebase-v9wn","depends_on_id":"firebase-30kp","type":"blocks","created_at":"2026-01-06T07:05:53.185614-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-vht2","title":"TEST: Verify column conversion handles overflow","description":"Write tests for column strings that would overflow: very long strings, MAX_SAFE_INTEGER boundary","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-06T07:01:15.662693-06:00","updated_at":"2026-01-06T07:01:15.662693-06:00"}
{"id":"firebase-vjva","title":"FEAT: Implement framework-agnostic HTTP handlers","description":"Refactor server.ts handlers to return Response objects, create adapters for Node http and Hono","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:07.908139-06:00","updated_at":"2026-01-06T07:02:07.908139-06:00","dependencies":[{"issue_id":"firebase-vjva","depends_on_id":"firebase-ywsr","type":"blocks","created_at":"2026-01-06T07:06:32.107406-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-vom","title":"[GREEN] firestore.do: Implement StructuredQuery to mongo.do translation","description":"Parse Firestore StructuredQuery, translate to mongo.do query operators","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:14.956905-06:00","updated_at":"2026-01-05T14:16:35.536175-06:00","closed_at":"2026-01-05T14:16:35.536175-06:00","close_reason":"Already implemented in src/firestore/query.ts - Complete StructuredQuery to MongoDB query translation with translateStructuredQuery function, filter translation (field, unary, composite), orderBy, cursors, projections, and runQuery execution","dependencies":[{"issue_id":"firebase-vom","depends_on_id":"firebase-i2h","type":"blocks","created_at":"2026-01-05T09:14:48.447559-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-vzn7","title":"FIX: Remove unused variables from evaluator.ts","description":"Remove or use opToken variables at lines 1149, 1171, 1247 in evaluator.ts","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:03.662449-06:00","updated_at":"2026-01-06T07:01:03.662449-06:00","dependencies":[{"issue_id":"firebase-vzn7","depends_on_id":"firebase-qgpx","type":"blocks","created_at":"2026-01-06T07:09:03.431513-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-w2i1","title":"REFACTOR: Extract token generation and storage into unified function","description":"Create a generateAndStoreRefreshToken() helper to ensure tokens are always stored when generated","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:16.424659-06:00","updated_at":"2026-01-06T07:01:16.424659-06:00","dependencies":[{"issue_id":"firebase-w2i1","depends_on_id":"firebase-m536","type":"blocks","created_at":"2026-01-06T07:01:16.42594-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-w325","title":"REFACTOR: Create shared test utilities and fixtures","description":"Extract common test setup, fixtures, mocks to test/utils/ to reduce duplication","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:02:11.744544-06:00","updated_at":"2026-01-06T07:02:11.744544-06:00","dependencies":[{"issue_id":"firebase-w325","depends_on_id":"firebase-jb0x","type":"blocks","created_at":"2026-01-06T07:07:33.386262-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-w530","title":"REFACTOR: Separate test compilation output directory","description":"Configure tsconfig to output test builds to dist/test/ not inline","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:05:10.914606-06:00","updated_at":"2026-01-06T07:05:10.914606-06:00","dependencies":[{"issue_id":"firebase-w530","depends_on_id":"firebase-nf4x","type":"blocks","created_at":"2026-01-06T07:07:48.145004-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-w8e3","title":"TEST: Verify consistent import extensions","description":"Check all imports use consistent extension pattern (.js for ESM compatibility)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:01:16.382093-06:00","updated_at":"2026-01-06T07:01:16.382093-06:00"}
{"id":"firebase-wjbh","title":"REFACTOR: Create bounded DocumentStore class with eviction policies","description":"Extract document storage to class supporting LRU, FIFO, or size-based eviction strategies","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:22.393697-06:00","updated_at":"2026-01-06T07:01:22.393697-06:00","dependencies":[{"issue_id":"firebase-wjbh","depends_on_id":"firebase-eolt","type":"blocks","created_at":"2026-01-06T07:01:41.422092-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-wjp4","title":"REFACTOR: Create configurable spreadsheet limits module","description":"Extract MAX_ROW, MAX_COLUMN to config, allow customization for different spreadsheet standards","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T07:00:47.620533-06:00","updated_at":"2026-01-06T07:00:47.620533-06:00","dependencies":[{"issue_id":"firebase-wjp4","depends_on_id":"firebase-2tvw","type":"blocks","created_at":"2026-01-06T07:05:41.364363-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-wmd","title":"Rules: ReDoS Vulnerability in User Regex","description":"## Problem\nThe .matches() function accepts user input as regex pattern without validation, creating a ReDoS (Regular Expression Denial of Service) vulnerability.\n\n**Location:** `src/rules/builtins.ts:215`\n\n## TDD Approach\n\n### RED: Write Failing Tests\nWrite tests with catastrophic backtracking patterns:\n- Test with evil regex: (a+)+$\n- Test with nested quantifiers: (a*)*b\n- Test with overlapping alternation: (a|a)+$\n- Test exponential backtracking patterns\n- Verify timeout/rejection of malicious patterns\n- Test legitimate regex patterns still work\n- Test edge cases at complexity boundaries\n\n### GREEN: Make Tests Pass\nAdd regex validation and timeout:\n- Implement regex complexity analysis\n- Detect dangerous patterns (nested quantifiers, overlapping groups)\n- Add execution timeout for regex matching\n- Use safe-regex or similar library for validation\n- Reject patterns exceeding complexity threshold\n- Consider RE2 or similar safe regex engine\n\n### REFACTOR: Clean Up\nDocument security considerations:\n- Document ReDoS risks in rules documentation\n- Add best practices for regex patterns\n- Log warnings for potentially slow patterns\n- Add configuration for timeout values\n- Consider regex pattern allowlist option","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:12.410206-06:00","updated_at":"2026-01-05T14:09:18.513509-06:00","closed_at":"2026-01-05T14:09:18.513509-06:00","close_reason":"Closed"}
{"id":"firebase-wqzg","title":"REFACTOR: Use Zod schemas for configuration validation","description":"Define Zod schemas for all config types, validate on load and update","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:31.486191-06:00","updated_at":"2026-01-06T07:01:31.486191-06:00","dependencies":[{"issue_id":"firebase-wqzg","depends_on_id":"firebase-bnfy","type":"blocks","created_at":"2026-01-06T07:07:16.059333-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-wzf","title":"[REFACTOR] infra: Add config validation and defaults","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:11:16.644045-06:00","updated_at":"2026-01-05T09:11:16.644045-06:00","dependencies":[{"issue_id":"firebase-wzf","depends_on_id":"firebase-0wk","type":"blocks","created_at":"2026-01-05T09:12:06.535872-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-wzqp","title":"REFACTOR: Create centralized environment configuration loader","description":"Create loadConfig() that reads all env vars with validation, defaults, and type coercion","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:00:43.038557-06:00","updated_at":"2026-01-06T07:00:43.038557-06:00","dependencies":[{"issue_id":"firebase-wzqp","depends_on_id":"firebase-moq2","type":"blocks","created_at":"2026-01-06T07:06:51.734696-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-xhm","title":"TEST: Verify refresh tokens are stored and retrievable after generation","description":"Write tests that verify: 1) After signup, the refresh token can be exchanged for a new token 2) After signin, the refresh token works 3) After update that generates new token, it's stored","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T06:59:51.633275-06:00","updated_at":"2026-01-06T07:16:26.281773-06:00","closed_at":"2026-01-06T07:16:26.281773-06:00","close_reason":"Closed"}
{"id":"firebase-xho","title":"[RED] rules.do: Test rules built-in functions","description":"Write failing tests for get(), exists(), getAfter(), math, string functions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:26.314021-06:00","updated_at":"2026-01-05T09:39:57.486626-06:00","closed_at":"2026-01-05T09:39:57.486626-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-yia0","title":"TEST: Verify configuration validation catches invalid values","description":"Write tests for invalid config: negative limits, invalid URLs, wrong types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:01:17.871796-06:00","updated_at":"2026-01-06T08:12:31.899328-06:00","closed_at":"2026-01-06T08:12:31.899328-06:00","close_reason":"Closed"}
{"id":"firebase-yli","title":"Storage: Implement proper CRC32C checksum algorithm","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:04:45.716652-06:00","updated_at":"2026-01-05T13:42:26.592206-06:00","closed_at":"2026-01-05T13:42:26.592206-06:00","close_reason":"Already fixed in P0 work"}
{"id":"firebase-ywsr","title":"TEST: Define HTTP handler interface for framework-agnostic routing","description":"Create tests for handler interface that works with Node http, Hono, Fastify, or fetch-based frameworks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:00.200374-06:00","updated_at":"2026-01-06T07:02:00.200374-06:00"}
{"id":"firebase-z7e","title":"[RED] functions.do: Test callable function protocol","description":"Write failing tests for POST with {data} body, {result} response format","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:11:05.301495-06:00","updated_at":"2026-01-05T09:39:57.48459-06:00","closed_at":"2026-01-05T09:39:57.48459-06:00","close_reason":"RED phase tests written"}
{"id":"firebase-z9vz","title":"TEST: Verify password hash is never returned in API responses","description":"Write tests for handleLookup and handleUpdate that assert passwordHash is NOT in responses","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-06T06:59:58.262849-06:00","updated_at":"2026-01-06T07:15:10.791974-06:00","closed_at":"2026-01-06T07:15:10.791974-06:00","close_reason":"Closed"}
{"id":"firebase-za9","title":"Firestore: Field Transforms Don't Handle Complex Types","description":"## Problem\nappendMissingElements uses JSON.stringify which fails for NaN, complex objects like GeoPoints, and causes incorrect deduplication.\n\n## Location\n`src/firestore/batch.ts:586-665`\n\n## TDD Plan\n\n### RED: Write failing tests\nWrite tests with NaN, GeoPoints, Maps in arrays:\n- Test arrayUnion with NaN values deduplicates correctly\n- Test arrayUnion with GeoPoint objects compares properly\n- Test arrayUnion with nested Maps/objects\n- Test arrayRemove handles complex types\n- Test that Infinity and -Infinity are handled\n- Test circular reference detection\n\n### GREEN: Make tests pass\nImplement deep equality comparison:\n- Replace JSON.stringify with proper deep equality\n- Handle special number values (NaN, Infinity)\n- Implement GeoPoint equality (lat/lng comparison)\n- Implement Timestamp equality\n- Handle nested object/array comparison\n\n### REFACTOR: Improve code quality\nUse Set-based deduplication:\n- Create custom equality comparator for Firestore types\n- Use efficient Set implementation with custom hash\n- Extract reusable deep-equal utility\n- Add performance tests for large arrays","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:06:14.634253-06:00","updated_at":"2026-01-05T14:10:08.543423-06:00","closed_at":"2026-01-05T14:10:08.543423-06:00","close_reason":"Closed"}
{"id":"firebase-zckf","title":"TEST: Verify configuration isolation between test runs","description":"Write tests that demonstrate configuration leaking between tests when using global state","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T07:02:31.895693-06:00","updated_at":"2026-01-06T10:36:14.486525-06:00","closed_at":"2026-01-06T10:36:14.486525-06:00","close_reason":"Closed"}
{"id":"firebase-zh9","title":"[RED] auth.do: Test user persistence in mongo.do","description":"Write failing tests for user CRUD in mongo.do auth collection","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:37.477373-06:00","updated_at":"2026-01-06T08:13:08.029471-06:00","closed_at":"2026-01-06T08:13:08.029471-06:00","close_reason":"Closed"}
{"id":"firebase-zjw","title":"[GREEN] firestore.do: Implement batchGet and commit operations","description":"Handle multiple documents in single request, atomic commits","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:21.475241-06:00","updated_at":"2026-01-05T14:16:42.935591-06:00","closed_at":"2026-01-05T14:16:42.935591-06:00","close_reason":"Already implemented in src/firestore/batch.ts - Complete batchGet and commit operations with BatchGetRequest/Response, CommitRequest/Response types, field masks, transforms, preconditions, and up to 100/500 items support","dependencies":[{"issue_id":"firebase-zjw","depends_on_id":"firebase-4uq","type":"blocks","created_at":"2026-01-05T09:15:01.601783-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-zrt","title":"[REFACTOR] rules.do: Add function caching and batching","description":"Cache get() results, batch multiple get() calls","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T09:13:04.105189-06:00","updated_at":"2026-01-05T09:13:04.105189-06:00","dependencies":[{"issue_id":"firebase-zrt","depends_on_id":"firebase-tow","type":"blocks","created_at":"2026-01-05T09:14:53.135682-06:00","created_by":"nathanclevenger"}]}
{"id":"firebase-zto","title":"Storage: Fix memory issues with large file uploads (streaming)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T12:04:52.990726-06:00","updated_at":"2026-01-05T12:35:37.789673-06:00","closed_at":"2026-01-05T12:35:37.789673-06:00","close_reason":"Implemented with parallel agents"}
{"id":"firebase-zwa","title":"[RED] functions.do: Test function registration and discovery","description":"Write failing tests for registering callable functions by name","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:12:06.08914-06:00","updated_at":"2026-01-05T14:19:16.104189-06:00","closed_at":"2026-01-05T14:19:16.104189-06:00","close_reason":"Tests exist in test/functions/callable.test.ts - registerFunction and clearFunctions usage demonstrated, plus function not found test"}
{"id":"firebase-zze","title":"[RED] functions.do: Test regional endpoint routing","description":"Write failing tests for region-project.cloudfunctions.net format","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T09:13:02.260109-06:00","updated_at":"2026-01-06T09:45:42.138727-06:00","closed_at":"2026-01-06T09:45:42.138727-06:00","close_reason":"Closed"}
